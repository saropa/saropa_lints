# Dart-Code v3-100

For instructions on installing the Dart or Flutter extensions, [go here](/#installation).

# v3.100.0 _2024-10-31_

## Deprecation of Support for Older SDK Versions

[#5257](https://github.com/Dart-Code/Dart-Code/issues/5257)/[#5304](https://github.com/Dart-Code/Dart-Code/issues/5304): As [previously announced](https://groups.google.com/g/flutter-announce/c/JQHzM3FbBGI), support for older Dart/Flutter SDKs will be deprecated with Dart 3.6 and removed when Dart 3.7 releases next year. If you are using an affected SDK version (a Dart SDK before Dart 3.0 or a Flutter SDK before Flutter 3.10) you will see a notification.

  > **#5257**: Add the ability to show notifications when the current SDK is unsupported (or will be soon) `is enhancement`
  > This adds two new fields to `DartCapabilities` for `isUnsupportedNow` and `isUnsupportedSoon` to determine whether to warn the user about unsupported SDKs. This is a necessary step before we can remove any legacy code (such as the legacy analysis server integration, or activating DevTools from pub!).
  > 
  > We always do the SDK check against the Dart SDK version, but if the current Dart SDK comes from Flutter, we will reference "Flutter" and its SDK version in the user-facing messages.
  > 
  > "Unsupported now" messages will always be shown as the intention is that the user will either upgrade their SDK or switch to an older extension.. this may seem annoying, but the extension will be broken in many ways when using an SDK that triggers this, so ignoring it is not an option - you must upgrade SDK or switch to an older extension.
  > 
  > "Unsupported soon" messages will be shown only until dismissed the first time (clicking "More Info" counts as dismissing), but this is tracked by major+minor version
  > 
  > _(truncated)_


![](/images/release_notes/v3.100/sdk_deprecation.png)

It is recommended to upgrade to at least Dart 3.0 / Flutter 3.10 (released May 2023) before then, but a table showing which extension versions support which SDKs (and instructions on how to change extension version) is available on the [SDK Compatibility page](/sdk-version-compatibility/) if you need to use these versions after then.

## DevTools

  * [#4971](https://github.com/Dart-Code/Dart-Code/issues/4971)/[#5297](https://github.com/Dart-Code/Dart-Code/issues/5297): VS Code theme changes are now pushed to DevTools realtime allowing it to update without a reload. This requires an equivalent change in DevTools which is included in the next SDK release.

  > **#4971**: VS Code theme changes do not apply to embedded DevTools until the window is reloaded/recreated `is bug` `in devtools`
  > DevTools screens (static and runtime) will stay in the theme (dark or light) that they were opened in. So when changing the IDE theme in VS code, these are the wrong color.

  * [#5311](https://github.com/Dart-Code/Dart-Code/issues/5311): Using the `dart.customDevTools` setting to run DevTools from source now assumes the tool is named `dt` instead of the original name `devtools_tool`.

  > **#5311**: Switch customDevTools to assume `dt` instead of `devtools_tool` `is enhancement` `in devtools`
  > See https://github.com/flutter/devtools/pull/8410




## Testing

  * [#5303](https://github.com/Dart-Code/Dart-Code/issues/5303): An error (“Cannot read properties of undefined (reading ‘endsWith’)”) that could prevent tests from being added to the Test Explorer has been resolved.

  > **#5303**: Error in DocumentCache `is bug` `in testing`
  > I saw this while testing https://github.com/Dart-Code/Dart-Code/issues/5302, running the test file.
  > 
  > ```
  > [7:36:33 PM] [General] [Error] Cannot read properties of undefined (reading 'endsWith')
  > TypeError: Cannot read properties of undefined (reading 'endsWith')
  > 	at uriComparisonString (d:\Dev\Dart-Code\Dart-Code\out\dist\extension.js:29682:45)
  > 	at DocumentCache.key (d:\Dev\Dart-Code\Dart-Code\out\dist\extension.js:29444:45)
  > 	at DocumentCache.get (d:\Dev\Dart-Code\Dart-Code\out\dist\extension.js:29411:35)
  > 	at LspFileTracker.getOutlineFor (d:\Dev\Dart-Code\Dart-Code\out\dist\extension.js:6050:30)
  > 	at TestSessionCoordinator.captureTestOutlne (d:\Dev\Dart-Code\Dart-Code\out\dist\extension.js:28115:43)
  > 	at TestSessionCoordinator.handleSuiteNotification (d:\Dev\Dart-Code\Dart-Code\out\dist\extension.js:28110:14)
  > 	at TestSessionCoordinator.handleNotification (d:\Dev\Dart-Code\Dart-Code\out\dist\extension.js:28079:22)
  > 	at TestSessionCoordinator.handleDebugSessionCustomEvent (d:\Dev\
  > 
  > _(truncated)_




## Dependencies Tree

  * [#5307](https://github.com/Dart-Code/Dart-Code/issues/5307): The Dependencies tree no longer fails to show any nodes if the folder name and the package name in `pubspec.yaml` do not match.

  > **#5307**: Dependencies tree doesn't show any nodes if the packages name in pubspec.yaml does not match the folders name `is bug` `in views`
  > **Describe the bug**
  > On some flutter projects with many dependencies, the dependencies panel is completely empty (no  
  > On the same Linux account, some other flutter projects have a working dependencies panel.  
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > This is reproducible on my account.
  > 
  > 1. git clone https://github.com/minaxorg/flutter_intro.git
  > 2. cd flutter_intro/example/
  > 3. flutter pub get
  > 4. code .
  > 5. open the "DEPENDENCIES" panel
  > 
  > **Expected behavior**
  > The VScode primary side bar dependencies panel must contains
  >   - direct dependencies
  >   - dev dependencies
  >   - transitive dependencies
  > 
  > **Screenshots**
  > ![image](https://github.com/user-attachments/assets/3ecea215-32aa-47ab-a9a4-1516d1c5ce05)
  > 
  > **Please complete the following information:**
  > 
  > You can run the **Dart: Collect Diagnostic Information** command from the VS Code command palette (`F1`) to easily capture this information or provide it manually.
  > 
  >  - Operating System and version:
  >   Linux Fedo
  > 
  > _(truncated)_




## Documentation / Website

  * [#5300](https://github.com/Dart-Code/Dart-Code/issues/5300): Fix a typo the “Line Length” setting description.

  > **#5300**: Typo in grammar "Line Length" description `is bug` `in docs / website`
  > **Describe the bug**
  > There's a typo in the description in VS code settings:
  > > **Dart: Line Length**
  > > The maximum length of a line of code. This is used by the document formatter. If you change this value, you may wish to update editor.rulers (which draws vertical lines in the editor) in the ["dart"] section if your settings to match.
  > 
  > "if your settings to match" should probably be "if you wish your settings to match" (for example)
  > 
  > **To Reproduce**
  > Enter settings UI with VS code, find the dart line length description.
  > 
  > **Expected behavior**
  > Correct grammar 
  > 
  > **Screenshots**
  > 
  > ![image](https://github.com/user-attachments/assets/99c565a2-0531-4523-8e86-131595da8ac7)
  > 
  > **Please complete the following information:**
  > 
  > 
  > 
  > Workspace Environment
  > 
  > ```text
  > Dart Code extension: 3.98.0
  > 
  > App: Visual Studio Code
  > App Host: desktop
  > Remote: wsl
  > Host Kind: wsl
  > Version: linux 1.93.1
  > 
  > Workspace type: Dart (LSP)
  > 
  > Dart (3.5.3): /usr/lib/dart
  > Flutter (undefined): undefined (N
  > 
  > _(truncated)_

  * [#4665](https://github.com/Dart-Code/Dart-Code/issues/4665)/[#5312](https://github.com/Dart-Code/Dart-Code/issues/5312): A [new page](/docs/sdk-locating/) was added to the site detailing how the extension locates an SDK to use during startup.

  > **#4665**: Create doc page that describes all possible ways to set path to flutter. `is enhancement` `in docs / website`
  > Now, when there are so many ways to set SDK in VSCode, including hidden way to build project and thus set flutter path to what was used for the build, a page that describes all of them and their priorities for VSCode, would really help.




## Misc

  * [#5321](https://github.com/Dart-Code/Dart-Code/issues/5321): The temporary allowlist for allowing Pub packages to recommend their VS Code extensions has been removed.

  > **#5321**: Remove allowlist for recommended extensions `is enhancement`
  > Hi, given the Dart VS Code extension supports suggesting VS Code extensions based on the installed packages, it would be great to either remove [the allow list](https://github.com/Dart-Code/Dart-Code/blob/master/src/extension/sdk/dev_tools/manager.ts#L550) or have a clear process of how a new extension can be added there.
  > 
  > For DCM, we have a presets package https://github.com/CQLabs/dart-code-metrics-presets that clearly indicates that the project uses DCM and therefore the user would benefit from such a notification if the DCM extension is not installed.
  > 
  > Also, if the required configuration is not documented anywhere, it would be great to have documentation for it as well.




## Features/Fixes Enabled with Future SDKs

The following items depend on changes to the Dart/Flutter SDKs that have not yet been released to stable channels. They may be available to test in the current beta/master channels and will show up in future SDK releases.

  * [#4934](https://github.com/Dart-Code/Dart-Code/issues/4934): The **Dart: Sort Members** command will now honor the `sort_constructors_first` lint.

  > **#4934**: Dart: Sort Members - Account for sort_constructors_first lint `is enhancement` `in editor` `in lsp/analysis server`
  > The Dart > Sort Members command should take into account [sort_constructors_first](https://dart.dev/tools/linter-rules/sort_constructors_first).

  * [#5294](https://github.com/Dart-Code/Dart-Code/issues/5294): Placing the caret in the name of a field in a record no longer causes VS Code to highlight all instances of that name in the document using a basic text search.

  > **#5294**: Highlighting bug for named record fields `is bug` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > **Describe the bug**
  > Selecting the name of a record field highlights everything matching the name.
  > 
  > [Dart-Code-Log-2024-09-02 08-36-25.txt](https://github.com/user-attachments/files/17204459/Dart-Code-Log-2024-09-02.08-36-25.txt)
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > 1. Open a new project
  > 2. Add the repro:
  > 
  > ```dart
  > void foo(int variable) {
  >   var record = (variable: variable,);
  > }
  > ```
  > 
  > 3. Select the parameter `variable` and see it highlighting itself and its use (the last `variable` on line 2)
  > 4. Select the record name `variable` and see every `variable` highlighted.
  > 
  > **Expected behavior**
  > I expect the only highlight to be the record name in the second case.
  > 
  > 
  > **Please complete the following information:**
  > 
  > 
  > 
  > Workspace Environment
  > 
  > ```text
  > Dart Code extension: 3.99.20240930
  > Flutter extension: 3.99.20240930 (activated)
  > 
  > App: Visual Studio Code
  > App Host: desktop
  > Version: win 1.93.1
  > 
  > Workspace type: Dart (LSP)
  > Workspace name: bug
  > 
  > Dart (3
  > 
  > _(truncated)_

  * [#5269](https://github.com/Dart-Code/Dart-Code/issues/5269): Renaming files (or creating new files whose paths are already imported) should no longer result in stale `uri_does_not_exist` diagnostics after the file exists.

  > **#5269**: Renaming files triggers `uri_does_not_exist` `is bug` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > **Describe the bug**
  > When renaming files I got `uri_does_not_exist` in the line modified by the refactoring.
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > 1. Create a new empty project
  > 2. Add file `a.dart`
  > 3. Add import to main.dart
  > 4. Rename `a.dart` to `c.dart`
  > 5. Immediately click on `main.dart` (I believe)
  > 6. See that on `main.dart` you get the `uri_does_not_exist` lint on the line that now is `c.dart`
  > 
  > Here is the zip with all logs: [temp.zip](https://github.com/user-attachments/files/17013446/temp.zip) (`main.dart` in this case is `temp.dart`).
  > 
  > **Expected behavior**
  > No errors.
  > 
  > **Please complete the following information:**
  > 
  > 
  > 
  > Workspace Environment
  > 
  > ```text
  > Dart Code extension: 3.97.20240902
  > Flutter extension: 3.97.20240902 (activated)
  > 
  > App: Visual Studio Code
  > App Host: desktop
  > Version: win 1.93.1
  > 
  > Workspace type: Dart (LSP)
  > Workspace name: temp
  > 
  > Dart (3.5.3): C:\Users\felip_0vh5fa6\.puro\shared\caches\36335019a8eab588c3c2ea783c618d90505be2
  > 
  > _(truncated)_

  * [#5235](https://github.com/Dart-Code/Dart-Code/issues/5235): The **Move To File** refactor now shows “Refactoring…” status notifications in the status bar, matching other kinds of refactors.

  > **#5235**: "Performing refactor..." progress status for "Move class to file" `is enhancement` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > **Is your feature request related to a problem? Please describe.**
  > When using the "Move class to file" refactor I see no indication that it is running even when it takes some seconds to finish (probably figuring out dependencies for imports and such).
  > 
  > **Describe the solution you'd like**
  > I'd like a toast to show the user something is happening and if something went wrong.
  > 
  > **Additional context**
  > See https://github.com/Dart-Code/Dart-Code/issues/5218.

  * [#5157](https://github.com/Dart-Code/Dart-Code/issues/5157): Breakpoints no longer jump to different lines if the location where they were added is not valid. Instead, they will remain grey/unresolved.

  > **#5157**: Breakpoints jump to different lines to where they were added `is enhancement` `fixed in dart / flutter` `in debugging` `relies on sdk changes`
  > **Describe the bug**
  > While adding new breakpoints sometimes other existing ones go invisible.
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > 
  > I am unsure what to write besides having a project and adding/removing breakpoints. I have not managed to reproduce it reliably.
  > 
  > **Expected behavior**
  > For all breakpoints to appear or at the worst case to move some lines up/down if the line cant be paused at.
  > 
  > **Screenshots**
  > 
  > https://github.com/Dart-Code/Dart-Code/assets/52160996/63dc35c6-7b86-4c51-8d26-39686e5ea696
  > 
  > **Please complete the following information:**
  > 
  > 
  > 
  > Workspace Environment
  > 
  > ```text
  > Dart Code extension: 3.90.0
  > Flutter extension: 3.91.20240529 (activated)
  > 
  > App: Visual Studio Code
  > App Host: desktop
  > Version: win 1.90.2
  > 
  > Workspace type: Flutter (LSP)
  > 
  > Dart (3.4.3): C:\Users\user\.puro\shared\caches\edd8546116457bdf1c5bdfb13ecb9463d2bb5ed4\dart-sdk
  > Flutter (3.22.2): C:\Users\user\.puro\envs\stable\flutter (SM G780F (android-arm64/android))
  > 
  > ```
  > 
  > 
  > 
  > _(truncated)_

