# Dart-Code v3-64

For instructions on installing the Dart or Flutter extensions, [go here](/#installation).

# v3.64.0 _2023-05-10_

## Testing Improvements

[#4021](https://github.com/Dart-Code/Dart-Code/issues/4021)/[#4487](https://github.com/Dart-Code/Dart-Code/issues/4487): A new setting `"dart.testInvocationMode"` has been added that allows you to choose how tests are executed from the test runner and CodeLens links.

  > **#4021**: Run tests using line/col to support groups/test with dynamic names `is enhancement` `in testing`
  > Added by @DanTup:
  > 
  > Some test cases to ensure are handled:
  > 
  > - [x] #4021
  > - [x] #4150
  > - [x] #4168
  > - [x] #4099
  > - [x] #4250
  > 
  > ----
  > 
  > **Describe the bug**
  > I have some functions to give a specific format to the descriptions of the groups and tests, like indentation, in this way it is easier to read them in the console, but when I execute a specific test, giving run in that group or test it tells me:
  > 
  > ```
  > No tests match regular expression "^groupDescriptionFormatted\('group 1'\)".
  > ```
  > 
  > **To Reproduce**
  > this is a minimal example:
  > ```dart
  > import 'package:test/test.dart';
  > 
  > String groupDescriptionFormatted(String description) {
  >   return description;
  > }
  > 
  > String subGroupDescriptionFormatted(String description) {
  >   return '\n    $description';
  > }
  > 
  > void main() {
  >   group(
  >     groupDescriptionFormatted('group 1'),
  >     () {
  >       group(subGroupDescriptionFormatted('sub group 1'), () {
  >         test('test', () {
  >           expect(true, isTrue);
  >         });
  >       });
  >     
  > 
  > _(truncated)_


![](/images/release_notes/v3.64/test_invocation_mode.png)

Previously, tests were always executed using their name by issuing a command like:
    
    
    dart test test/foo_test.dart --name "my test"
    

This could fail to run the correct test if groups/tests have dynamic names, unusual characters or similar/duplicated names. Selecting `"line"` in the new setting will instead (when supported by your version of `package:test`) run tests using their line number:
    
    
    dart test "test/foo_test.dart?line=4"
    

This resolves a number of issues, including:

  * [#4250](https://github.com/Dart-Code/Dart-Code/issues/4250): Debugging tests fail if the description has an interpolated value and is composed of two concatenated strings

  > **#4250**: Debugging flutter tests fail if the descrription string has an interpolated value and a is composed of two concatenated strings `is bug` `in testing`
  > **Describe the bug**
  > If the description of the test has an interpolated value and a is composed of two concatenated strings the test will not run
  > 
  > **To Reproduce**
  > 
  > Write a test like the following and try to run it by clicking the debug option 
  > 
  > ![image](https://user-images.githubusercontent.com/95715668/200192354-9cb12fbd-05d4-4108-871d-6f1f2c294c73.png)
  > 
  > 
  > ```
  > import 'package:test/test.dart';
  > 
  > void main() async {
  >   //
  >   int foo = 1;
  >   test("Start string $foo " "  end string", () async {
  >     expect(true, true);
  >   });
  > }
  > ```
  > 
  > Get this result:
  > 
  > ```
  > Connecting to VM Service at http://127.0.0.1:64510/Y0ktArhJg9g=/ws
  > No tests match regular expression "^Start string .* " "  end string( \(variant: .*\))?$".
  > Exited (1)
  > ```
  > **Expected behavior**
  > 
  > I expect the test to run.
  > 
  > 
  > 
  > **Please complete the following information:**
  >  - Operating System and version:
  >    MacOS 12.6
  >  - VS Code version:
  >  
  > ```
  > Version: 1.72.2 (Universal)
  > Commit: d045a5eda657f4d7b676dedbfa
  > 
  > _(truncated)_

  * [#4168](https://github.com/Dart-Code/Dart-Code/issues/4168): Parens around test name prevents CodeLens links from working

  > **#4168**: Parens around test name prevents CodeLens links from working `is bug` `in testing`
  > Noted at https://github.com/Dart-Code/Dart-Code/issues/1458#issuecomment-1253608986 by @nilsreichardt.
  > 
  > ```dart
  > test('foo', () {});
  > ```
  > 
  > > No tests match regular expression "^\('foo'\)( \(variant: .*\))?$".
  > 
  > Opening this as a placeholder/reminder to ensure that once #4021 is implemented that it covers this case (which might mean that we just don't pass any test name with the line/col).

  * [#4150](https://github.com/Dart-Code/Dart-Code/issues/4150): Tests with the same name except for an interpolated variable will all run together instead of only the selected test

  > **#4150**: Multiple tests execution `is enhancement` `in testing`
  > **Describe the bug**
  > Once you're trying to run test, which description contains variable or type used in other test, multiple tests would be executed.
  > This could be annoying if you're using some kind of BLoC/Redux actions, which types may be located in multiple test descriptions.
  > 
  > Simular issue in `/test` repo: https://github.com/dart-lang/test/issues/1760.
  > There we found out, that the plugin [could interprete](https://github.com/dart-lang/test/issues/1760#issuecomment-1238381218) expressions like `'is $Object'` incorrectly.
  > 
  > **To Reproduce**
  > Run `'is $Object'` test.
  > 
  > ```dart
  > import 'package:test/test.dart';
  > 
  > class MyObj {
  >   final number = 10;
  > 
  >   bool foo() => true;
  > }
  > 
  > void main() {
  >   group('$MyObj', () {
  >     late MyObj myObj;
  > 
  >     setUp(() {
  >       myObj = MyObj();
  >     });
  > 
  >     test('is $Object', () {
  >       expect(myObj, isA());
  >     });
  > 
  >     test('foo returns true and is an $Object', () {
  >       expect(myObj.foo(), isTrue);
  > 
  >       expect(myObj, isA());
  > 
  > _(truncated)_

  * [#4099](https://github.com/Dart-Code/Dart-Code/issues/4099): “No tests match regular expression…” when running tests using Glados property-based testing

  > **#4099**: "No tests match regular expression...", customize regex `is enhancement` `in testing`
  > I get the "No tests match regular expression..." error when using [Glados](https://github.com/MarcelGarus/glados) (property-based testing) and attempting to run a test via test code lens.
  > 
  > It seems they modify the name of the test [here](https://github.com/MarcelGarus/glados/blob/503180fc8c1051b7c9bdccb3bd14d7d95135722d/glados/lib/src/glados.dart#L167).
  > 
  > Is there a way for me to modify the regex used to account for their modification, or another solution?
  > (I'm using Dart SDK without Flutter)
  > 
  > Thanks!

  * [#3630](https://github.com/Dart-Code/Dart-Code/issues/3630): Test CodeLens cannot run tests that are outside of their `group()` call in the source code

  > **#3630**: Support running single tests that are not inside their group hierarchy in the source file `is enhancement` `in testing`
  > **Is your feature request related to a problem? Please describe.**
  > Having a `group` with an anonymous function with some calls to the `test` function, when I click on "Run" above an `test` function, somehow the argument passed to `dart test` has the group an test name and I'm able to run the test without problems.
  > 
  > But when I pass a reference to a function to the `group`, the argument passed to `dart test` has only the test name and I receive an `No tests match regular expression` error.
  > 
  > **Describe the solution you'd like**
  > This is more a question than an enchancement, so here it goes: Is it possible to run the `First test` in the example by clicking on "Run" above it?
  > 
  > I'm questioning because I don't know if there is a limitation on how VS Code handle this.
  > 
  > **Additional context**
  > Here is a sample code. In this example, I'm able to run "Second test" but not "First test".
  > 
  > ```dart
  > import 'package:test/test.dart';
  > 
  > void main() {
  >   group('First group', referencedFunctio
  > 
  > _(truncated)_




For now, the default setting remains `"name"` but you are encouraged to test out `"line"` and [file issues](https://github.com/Dart-Code/Dart-Code/issues/new/choose) if you find any places where it does not work as expected. In a future release `"line"` may become the default.

## Go to Symbol in Workspace Improvements

[#1903](https://github.com/Dart-Code/Dart-Code/issues/1903): A new setting has been added that allows excluding SDK/package symbols from the Go to Symbol in Workspace (`cmd`+`T`) search which can considerably speed up the search for large workspaces.

  > **#1903**: for symbol search[cmd + t], add option to hide symbols from sdk `is enhancement` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > I want to be able to only list the symbols from files in my workspace, to speed up the search and greatly reduce the number of irrelevant results.


![](/images/release_notes/v3.64/dependencies_in_workspace_symbols.png)

## Experimental Refactors: Move to File

[#1831](https://github.com/Dart-Code/Dart-Code/issues/1831)[#4159](https://github.com/Dart-Code/Dart-Code/issues/4159)/[#4467](https://github.com/Dart-Code/Dart-Code/issues/4467): A new setting `"dart.experimentalRefactors"` has been added to allow gathering feedback of new refactors.

  > **#1831**: Refactoring - Move Widget/Class to New File `is enhancement` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > I don't know if this is VSCode feature request or specifically for dart/flutter, but is it possible to move a widget class (or any other class) to a new file? If I remember correctly Visual Studio have this refactoring option.
  > 
  > Say I have this `my_widget.dart` file.
  > ```
  > class MyWidget extends StatelessWidget {
  >   const MyWidget({Key key}) : super(key: key);
  > 
  >   @override
  >   Widget build(BuildContext context) {
  >     return Container(
  >       child: child,
  >     );
  >   }
  > }
  > 
  > class MyOtherWidget extends StatelessWidget {
  >   const MyOtherWidget({Key key}) : super(key: key);
  > 
  >   @override
  >   Widget build(BuildContext context) {
  >     return Container(
  >       child: child,
  >     );
  >   }
  > }
  > ```
  > I want to move `MyOtherWidget` to `my_other_widget.dart` (automatically created) and automatically import that file if `my_widget.dart` contains `MyOtherWidget` references. Sorry if this is a duplicate.
  > Thank you.


The first available refactor (for Dart 3.0 / Flutter 3.10) is “Move to File” that allows moving top level declarations to another (new or existing) file.

![](/images/release_notes/v3.64/move_to_file.gif)

Experimental refactors may be incomplete or not produce the correct code in all cases.

### “Move to File” Known Issues:

  * Imports added to the destination file may be to the declaration of moved references instead of the original imports being copied from the source file. This is a bug and a fix is in progress for a future release.



## Debugger Format Specifiers and Hex view

[#3940](https://github.com/Dart-Code/Dart-Code/issues/3940)/[#4365](https://github.com/Dart-Code/Dart-Code/issues/4365): When using the new SDK debug adapters (enabled for Dart and rolling out for Flutter), you can change the format of numbers in the Variables/Watch window between Hex and Decimal.

  > **#3940**: Support rendering numbers in variables list in hex `is enhancement` `in debugging` `relies on sdk changes`
  > Requested by @timsneath.. It would be useful to be able to view values in hex format in the variables view.
  > 
  > VS Code/DAP only work with strings so cannot provide formatting themselves, but the recommended way seems to be to contribute a context menu entry and handle it ourselves:
  > 
  > https://github.com/microsoft/vscode/issues/28025#issuecomment-722687806
  > 
  > This might need both work in the DAP and the VS Code extension (I'm also unsure whether this interacts with the `ValueFormat` in DAP spec, or if that's still VS-only).


Additionally, you can add “format specifiers” to the end of evaluated expressions to affect how they are rendered:

  * `,nq` \- don’t include quotes around strings
  * `,h` \- render in hexadecimal
  * `,d` \- render in decimal



Format specifiers apply to child values so adding `,nq` to an expression that evalutes to a `List<String>` will suppress quotes for each value.

![](/images/release_notes/v3.64/hex_and_format_specifiers.gif)

## Debugger

  * [#4408](https://github.com/Dart-Code/Dart-Code/issues/4408): When using the new SDK debug adapters (enabled for Dart and rolling out for Flutter), Global Variables will be shown in the Variables pane.

  > **#4408**: Show Globals in Variables pane `is enhancement` `in debugging` `relies on sdk changes`
  > See https://github.com/flutter/devtools/issues/5295.

  * [#4429](https://github.com/Dart-Code/Dart-Code/issues/4429): The Run/Debug editor buttons are now available for files outside of the `lib`/`bin`/`tool` folders.

  > **#4429**: Quick Debug/Launch button missing when renaming lib folder `is bug` `in debugging`
  > **Describe the bug**
  > A clear and concise description of what the bug is.
  > 
  > The quick debug/launch button in the upper right of VSCode window disappears when renaming the lib folder.
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > 
  > 1. Create a new Flutter Project
  > 2. Rename `lib/` to something else, e.g. `src/`
  > 
  > **Expected behavior**
  > A clear and concise description of what you expected to happen.
  > 
  > Quick debug/launch button should still be accessible.
  > 
  > **Screenshots**
  > If applicable, add screenshots to help explain your problem.
  > 
  > Button visible with standard `lib/` name
  > ![image](https://user-images.githubusercontent.com/24683014/223907127-3a8e394c-560d-4c63-9275-c73ff81f00b7.png)
  > 
  > Button missing after renaming directory to `src/`
  > ![image](https://user-images.githubusercontent.com/24683014/223907272-be4655fd-364b-4502-8339-549e7685374b.png)
  > 
  > **Please complete the following information:**
  >  - Operating System and version: Windows 11 Home - 22621.1265
  >  - VS Code ve
  > 
  > _(truncated)_

  * [#4515](https://github.com/Dart-Code/Dart-Code/issues/4515): The new `flutter debug-adapter` debug adapter should no longer sometimes throw “thread was not found” errors.

  > **#4515**: DebugAdapterException thread was not found during `flutter debug-adapter` `is bug` `in debugging` `important`
  > **Describe the bug**
  > 
  > Flutter Beta 3.10.0-1.4.pre (with [dds v2.7.9](https://github.com/flutter/flutter/blob/beta/packages/flutter_tools/pubspec.yaml#L13)) was just released yesterday April 26. There is one crash with a DebugAdapterException:
  > 
  > ```
  > DebugAdapterException: DebugAdapterException: Thread 107 was not found
  > at IsolateManager.resumeThread(isolate_manager.dart:263)
  > at IsolateManager._handlePause(isolate_manager.dart:479)
  > at (async)
  > at IsolateManager.handleEvent(isolate_manager.dart:178)
  > at (async)
  > at DartDebugAdapter.handleDebugEvent(dart.dart:2076)
  > at (async)
  > at DartDebugAdapter._withErrorHandling(dart.dart:2417)
  > at (async)
  > ```
  > 
  > **To Reproduce**
  > `flutter debug_adapter`
  > 
  > **Please complete the following information:**
  >  - Operating System and version: Windows [Version 10.0.22621.1631]
  >  - VS Code version: unknown
  >  - Dart extension version: unknown
  >  - Dart/Flutter SDK version: Flutter 3.10.0-1.4.pre
  >  - Target device (if the issue relates to Flutter debuggin
  > 
  > _(truncated)_

  * [#764](https://github.com/Dart-Code/Dart-Code/issues/764): When using the new SDK debug adapters, breakpoints are no longer marked as verified immediately and will appear grey until the VM resolves them.

  > **#764**: Breakpoints are marked as verified before being resolved `is bug` `in debugging` `relies on sdk changes`
  > Seems like we always say breakpoints are verified when we get back an unresolved confirmation. I think they should remain unverified until we get BreakpointResolved (which we currently ignore).




## Flutter

  * [#4511](https://github.com/Dart-Code/Dart-Code/issues/4511): Adding `"suppressWebServerDeviceBrowserLaunch": true` to a launch configuration will suppress the browser being automatically opened when using the `web-server` device.

  > **#4511**: Add a way to suppress launching the browser when using the web-server device `is enhancement` `in flutter` `in debugging`
  > Usually when using the web-server device we want to open a browser when the app is ready. This isn't the case if we just want the app running in the background (eg. to embed somewhere). We should have some flag (`launch.json`?) to suppress this.
  > 
  > The launching is handled in response to the `dart.webLaunchUrl` event.

  * [#4494](https://github.com/Dart-Code/Dart-Code/issues/4494): [@pouyakary](https://github.com/pouyakary) modified Flutter UI Guides to have rounded corners.

  > **#4494**: Round corner for flutter guides `is enhancement` `in flutter`
  > Today I finally discovered that these flutter guides are a beta preview ! and so I enabled them and thought, why not having round corner? So this is the tiniest PR possible :) making only a simple change that makes these guides a little bit prettier hopefully...
  > 
  > 
  > 
  > ![](https://user-images.githubusercontent.com/2157285/232771714-3d59e8be-5f3c-474b-b692-5e528f6600e8.png)

  * [#4491](https://github.com/Dart-Code/Dart-Code/issues/4491): The Flutter device name is now automatically included in debug session names to make it easier to start multiple debug sessions for different devices.

  > **#4491**: Include device name in run process / default `launch.json` `is enhancement` `in flutter` `in debugging`
  > **Is your feature request related to a problem? Please describe.**
  > 
  > When running the same app on multiple devices (in this case, using the default generated `launch.json`), it's impossible to distinguish between the different instances
  > 
  > In addition, after selecting another device, and running, VS Code complains about an existing app with the same name
  > 
  > 
  > 
  > **Describe the solution you'd like**
  > The name of the running app to reflect the device.
  > 
  > **Describe alternatives you've considered**
  > N/A

  * [#4281](https://github.com/Dart-Code/Dart-Code/issues/4281): Clicking the Restart button during a Profile/Release debug session is now supported when using the new SDK debug adapters.

  > **#4281**: Handle debugger restart request (with a cold restart) for Flutter profile/release mode `is enhancement` `in flutter` `in debugging` `relies on sdk changes`
  > See https://github.com/Dart-Code/Dart-Code/issues/4276#issuecomment-1325338777.
  > 
  > -----
  > 
  > We can't hide the "restart" button (which we usually use for _Hot_ Restart) because VS Code doesn't allow it (restart should always be possible, even if it's not a Hot Restart, because it should just be the same as stopping the session and starting it again). We also can't currently tell VS Code to handle the restart because we only know about profile/release flags in launchRequest (not during startup when capabilities are exchanged).
  > 
  > So there are a few options:
  > 
  > 1. Do nothing. This means the restart button on the debug toolbar will not work, and instead prints an error to the console in profile/release mode:
  >     > Failed to Hot Restart: DebugAdapterException: Exception: Restart is not supported in profile mode
  > 2. Handle restartRequest in the DAP and terminate the `flutter run` process, clean up all state, and then restart it (this is probably the best solution, but also complex)
  > 3. Pass
  > 
  > _(truncated)_

  * [#4510](https://github.com/Dart-Code/Dart-Code/issues/4510): The **Flutter: Select Device** command no longer silently fails if the Flutter device daemon has terminated.

  > **#4510**: "Select Device" doesn't work if the daemon has terminated, but provides no feedback `is bug` `in flutter` `in commands`
  > **Describe the bug**
  > After a bit of usage, tapping the device selector in the bottom right results in no action. The "Flutter: Select device" command also does nothing. Only restarting VS Code fixes the issue, temporarily.
  > 
  > **To Reproduce**
  > Unclear for now
  > 
  > **Please complete the following information:**
  >  - Operating System and version: macOS Ventura
  >  - VS Code version: 1.77.3
  >  - Dart extension version: 3.62
  >  - Dart/Flutter SDK version: 3.10.0-10.0.pre.17
  > 
  > Logs
  > ```
  > Wed Apr 26 2023 [10:46:07 GMT+0200 (Central European Summer Time)] Log file started
  > [10:46:10 AM] [General] [Info] Returning cached promise for getSupportedPlatforms()
  > Wed Apr 26 2023 [10:46:12 GMT+0200 (Central European Summer Time)] Log file ended
  > ```

  * [#4475](https://github.com/Dart-Code/Dart-Code/issues/4475): Trying to start a debug session after the Flutter device daemon has terminated no longer hangs.

  > **#4475**: Unable to start running/debugging a Flutter app after Flutter daemon crashes, if not restarted `is bug` `in flutter` `in debugging`
  > ![vs-code-not-running](https://user-images.githubusercontent.com/43759233/228931738-9e0bb5c8-83f2-4d26-8070-c42b9508e2df.gif)
  > 
  > This happens to me almost daily. At some point, clicking run to run my flutter app just hangs. I always have to run `Developer: Reload window` to fix the issue. I opened the developer logs and saw this.
  > 
  > ```
  >   ERR File is not being analyzed: Error: File is not being analyzed
  > 	at handleResponse (/Users/kenzieschmoll/.vscode/extensions/dart-code.dart-code-3.61.20230324/out/dist/extension.js:29849:48)
  > 	at processMessageQueue (/Users/kenzieschmoll/.vscode/extensions/dart-code.dart-code-3.61.20230324/out/dist/extension.js:29645:17)
  > 	at Immediate. (/Users/kenzieschmoll/.vscode/extensions/dart-code.dart-code-3.61.20230324/out/dist/extension.js:29629:13)
  > 	at process.processImmediate (node:internal/timers:466:21)
  > ```
  > 
  > ![Screenshot 2023-03-30 at 11 35 07 AM](https://user-images.githubusercontent.com/43759233/228932052-fb3ca392-e7ae-4bb7-850f-55b548dc4b3c.png)

  * [#3988](https://github.com/Dart-Code/Dart-Code/issues/3988): Flutter code snippets like `stful` and `stless` that add imports no longer import from a packages private `src/` folder when a public import is available.

  > **#3988**: Stf/Stl Snippets now using /src/foundation/key.dart' & '/src/widgets/framework.dart' ? `is bug` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > Hi everyone.
  > It's hard for me to undestand it I made something wrong or if its coincidently occurs after upgradiing flutter.
  > But suddenlly, using snippetts "stl" or "stf' have changed and don't use anymore "import 'package:flutter/material.dart;" but theses instead
  > ![image](https://user-images.githubusercontent.com/61077647/169834142-43478657-3d32-4be7-b508-ce1e4a2e74c9.png)
  > 
  > Obiously I paid attention to disable as many Vscode extension as possible to ensure that none interfers...
  > Does anyome have an idea if I messed up somewhere ?




## Other

  * [#4501](https://github.com/Dart-Code/Dart-Code/issues/4501): Developing in the Dart SDK repository checked out as a git worktree no longer triggers unwanted executions of `pub`.

  > **#4501**: Developing in the Dart SDK repo checked out as a git worktree triggers unwanted "pub" runs `is bug`
  > See https://github.com/dart-lang/sdk/issues/52067#issuecomment-1516768336.
  > 
  > We're finding the git root by looking only for files, but in this case `.git` is a file.

  * [#4519](https://github.com/Dart-Code/Dart-Code/issues/4519): The extension no longer fails to activate on modern versions of Theia.

  > **#4519**: Telemetry exception when loading extension in Theia `is bug` `on cloud ide`
  > **Describe the bug**
  > When loading the VSCode Dart extension in Theia, the following error is shown (see also screenshot):
  > 
  > `Activating extension 'Dart' failed: vscode_1.env.createTelemetryLogger is not a function`
  > 
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > 1. Fork & clone https://github.com/elliette/theia-dart
  > 2. Update the extensions from version 3.60.0 to 3.62.0 in `browser-app/package.json` (see below)
  > 3. Follow the instructions in the README to run 
  > 
  > ```
  >   "theiaPlugins": {
  >     "vscode-dart": "https://github.com/Dart-Code/Dart-Code/releases/download/v3.62.0/dart-code-3.62.0.vsix",
  >     "vscode-flutter": "https://github.com/Dart-Code/Flutter/releases/download/v3.62.0/flutter-3.62.0.vsix"
  >   },
  > ```
  > 
  > **Expected behavior**
  > No exception
  > 
  > **Screenshots**
  > ![Screenshot 2023-05-03 at 12 41 46 PM](https://user-images.githubusercontent.com/21270878/236028276-f83495e8-f516-4093-974e-d798f5977099.png)

  * [#4484](https://github.com/Dart-Code/Dart-Code/issues/4484): The error “Cannot read properties of undefined (reading ‘logger’)” is no longer written to the console at startup.

  > **#4484**: "Cannot read properties of undefined (reading 'logger') `is bug`
  > While running from source:
  > 
  > ```
  > rejected promise not handled within 1 second: TypeError: Cannot read properties of undefined (reading 'logger')
  > stack trace: TypeError: Cannot read properties of undefined (reading 'logger')
  > 	at handleError (/Users/danny/Dev/Dart-Code/out/dist/extension.js:6996:14)
  > 	at process.processTicksAndRejections (node:internal/process/task_queues:96:5)
  > rejected promise not handled within 1 second: TypeError: Cannot read properties of undefined (reading 'logger')
  > stack trace: TypeError: Cannot read properties of undefined (reading 'logger')
  > 	at handleError (/Users/danny/Dev/Dart-Code/out/dist/extension.js:6996:14)
  > 	at process.processTicksAndRejections (node:internal/process/task_queues:96:5)
  > ```

  * [#4424](https://github.com/Dart-Code/Dart-Code/issues/4424): The dartcode.org website [now lists](https://dartcode.org/docs/analytics/) information about the analytics collected by the extension. The extension also includes a `telemetry.json` that is included in the output of the [`code --telemetry` command](https://code.visualstudio.com/docs/getstarted/telemetry#_viewing-all-telemetry-events).

  > **#4424**: Provide telemetry.json and document what's collected on the website `in docs / website`
  > ~~**Is your feature request related to a problem? Please describe.**
  > Users currently *sometimes* know there *is* telemetry, but they do not know which kind of telemetry.~~
  > 
  > ~~**Describe the solution you'd like**
  > A clear message saying VSCode uses telemetry, what is sent, a consent button and a do not consent button. An optional panel in the titlebar showing the user what information is being sent, when and how. 
  > E.G: a panel in the Help titlebar button, that when clicked, opens a pane, with a table, showing all the requests and what exactly they send, and how much requests have been sent the last week.~~
  > 
  > ~~**Describe alternatives you've considered**
  > Show the user a summary of all the information they've sent, put together.~~
  > 
  > ~~**Additional context**
  > I understand why telemetry can be useful for something as big as VSCode, but I believe there's 2 keys here missing: consent and clarification.~~
  > 
  > EDIT: use vscode's built-in telemetry API.

