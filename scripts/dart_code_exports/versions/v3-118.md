# Dart-Code v3-118

For instructions on installing the Dart or Flutter extensions, [go here](/#installation).

# v3.118.2 _2025-09-19_

  * [#4612](https://github.com/Dart-Code/Dart-Code/issues/4612)/[#5709](https://github.com/Dart-Code/Dart-Code/issues/5710): The ability to add SDKs to the `PATH` env variable for external terminals is now available for macOS.

  > **#4612**: Support adding SDKs to PATH on macOS (command + as part of Flutter install) `is enhancement` `on mac` `in commands`
  > Currently the work done for https://github.com/Dart-Code/Dart-Code/issues/4604 is Windows-only.
  > 
  > We need to evaluate options for adding to PATH on macOS. The original plan was to add symlinks to something like `/usr/bin`, however since the SDK is likely in a user-specific folder, this could do bad things for systems used by more than one user.
  > 
  > We should see if there's a reasonable way we could automate adding to shell profile scripts (is it save to always append? can we tell which profile script(s) are required?).
  > 
  > @polina-c

  * [#5709](https://github.com/Dart-Code/Dart-Code/issues/5709)/[#5709](https://github.com/Dart-Code/Dart-Code/issues/5710): Allowing the extension to clone Flutter via `git` no longer incorrectly shows an error saying the SDK cannot be located immediately after installing.

  > **#5709**: Flutter SDK not found immediately after installing through Dart-Code `is bug` `in flutter` `in commands`
  > While testing https://github.com/Dart-Code/Dart-Code/issues/4612, I noticed that after installing the Flutter SDK and clicking "Add to PATH", I got a popup saying the SDK could not be found. It was correctly in the `dart.flutterSdkPath` setting, so we shouldn't have caused this prompt.




# v3.118.1 _2025-09-03_

  * [#5681](https://github.com/Dart-Code/Dart-Code/issues/5681): Fixed an issue where spawning new processes (such as starting a Flutter debug session) could fail when the Flutter Widget Previewer experiment was enabled.

  > **#5681**: Broken toolArgs when starting Flutter app `is bug` `in debugging` `important`
  > While testing (using Dart-Code from source), I opened my sample flutter_counter app and hit F5, and for this odd error in the Debug Console.
  > 
  > Looking in the logs, we somehow have a bunch of unexpected arguments (for starting the widget preview) in the `toolArgs` of the debug session. Something is not correct here.




# v3.118.0 _2025-09-01_

## Deprecation of SDKs prior to Dart 3.1 / Flutter 3.13

[#5667](https://github.com/Dart-Code/Dart-Code/issues/5667): Support for SDKs prior to Dart 3.1 and Flutter 3.13 is being deprecated. If you are using affected versions you will be shown a one-time warning advising you to upgrade.

  > **#5667**: Warn that Dart / Flutter SDKs prior to Dart 3.1 / Flutter 3.13 are deprecated and support will be removed soon `in flutter` `in dart`
  > With the recent Flutter stable release, it was announced that IDE support for SDKs prior to 3.13 is deprecated:
  > 
  > https://medium.com/flutter/whats-new-in-flutter-3-35-c58ef72e3766
  > 
  > > With this release, we are deprecating IDE support for Flutter SDKs before 3.13.
  > 
  > Flutter 3.13 / Dart 3.1 (shipped August 2023, a little over two years ago) will become the new minimum version.
  > 
  > For the upcoming release, we will mark these as "unsupported soon" so that prompts are shown to anyone still using these versions, and in a subsequent release they will be marked as "unsupported now".


These SDKs will still work with this version (v3.118) but some functionality will stop working with the next release. A table showing which extension versions support which SDKs (and instructions on how to change extension version) is available on the [SDK Compatibility page](/sdk-version-compatibility/) if you need to continue to use unsupported SDKs.

## Flutter

  * [#5623](https://github.com/Dart-Code/Dart-Code/issues/5623)/[#5631](https://github.com/Dart-Code/Dart-Code/issues/5631): Code coverage now includes dependencies that exist in the workspace, not only the app being tested.

  > **#5623**: Include Code Coverage for dependencies in the workspace, not only the main app `is enhancement` `in flutter` `in testing` `in coverage`
  > **Describe the bug**
  > 
  > In our project, only the coverage of one package appears during the test coverage. The submodules contains several packages.
  > 
  > Our project has the following structure:
  > 
  > - app/src
  > - submodule/package/ads
  > - submodule/package/core
  > - ...
  > 
  > Only the core appears in the coverage overview and within the folder view. All other coverage is not visible.
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > 1. Create project with a submodule with several packages with their own tests.
  > 2. Generate test coverage
  > 
  > **Expected behavior**
  > 
  > All files should appear in test coverage. On the file overview, the coverage appears.
  > 
  > **Screenshots**
  > 
  > Coverage only from package `core` within the submodule `framework`:
  > 
  > **Please complete the following information:**
  > 
  > **!! ⚠️ PLEASE REVIEW THIS REPORT FOR SENSITIVE INFORMATION BEFORE SHARING ⚠️ !!**
  > 
  > Workspace Environment
  > 
  > ```text
  > Dart Code extension: 3.117.20250731
  > Flutter extension: 3.117.20250731 (activated)
  > 
  > _(truncated)_

  * [#5673](https://github.com/Dart-Code/Dart-Code/issues/5673): Enabling a new device for Flutter apps now correctly selects the launch project when the active launch configuration references a different project to the active file.

  > **#5673**: Device is enabled for wrong project when launch config and active file don't match `is bug` `in debugging`
  > While investigating #5670 I noticed that if I had no enabled devices and pressed F5, I'm prompted to enable one:
  > 
  > But when I select one, it gets enabled for the wrong package (note "windows" here was added to the package, not the app):

  * [#5651](https://github.com/Dart-Code/Dart-Code/issues/5651)/[#5653](https://github.com/Dart-Code/Dart-Code/issues/5653): A new setting `dart.useFlutterDev` allows use of `flutter-dev` instead of `flutter`. This script is intended for use by contributors to the `flutter` tool to avoid having to manually rebuild the tool when making local changes.

  > **#5651**: Support using `flutter-dev` as the Flutter entrypoint script `is enhancement` `in flutter` `flutter-devexp-team`
  > `flutter-dev` is a version of `flutter` used by developers working on `flutter_tools` that runs the tool from source instead of precompiling the tool as a snapshot on first run and using the precompiled snapshot for subsequent runs.
  > 
  > Dart-Code should provide support for using `flutter-dev` to reduce some friction for `flutter_tools` developers.
  > 
  > From some local experimentation where I renamed `flutter-dev` to `flutter` and updated `bin/internal/shared.sh` to not try to build a snapshot for `flutter` instead of `flutter-dev`, it looks like Dart-Code does make use of the existence of `bin/cache/flutter_tools.snapshot` to determine if the tool is initialized:
  > 
  > _(truncated)_




## AI

  * [#5639](https://github.com/Dart-Code/Dart-Code/issues/5639): A new setting `dart.mcpServerTools` allows excluding some of the Dart MCP servers tools from registration with VS Code/Copilot. By default the `runTests` tool is excluded because it overlaps with an equivalent tool provided by VS Code.

  > **#5639**: Add support for excluding MCP tools from the Dart MCP server `is enhancement` `in ai`
  > Some of the built-in tools like `run_tests` overlap with built-in VS Code functionality, but the model might choose the SDK version despite having less functionality.
  > 
  > TODO
  > - [x] Figure out exactly which tools we should exclude
  > - `run_tests` seems like a like candidate
  > - `analyzer_files` - maybe? VS Code has Problems, but it's not clear if the model can read them all, or only for a given file?
  > - `create_project` ?
  > - `dart_fix` ?
  > - `hot_reload` ?
  > - `pub` - should we expose the built-in Dart-Code commands so it can call things that show in the UI?
  > 
  > **Edit:** For now, only excluding `runTests` because it's the only one that specifically does overlap- the others require us to expose new tools from Dart-Code, or VS Code changes (I've opened https://github.com/Dart-Code/Dart-Code/issues/5647 to track the problems tool replacing `analyze_files`).




## DevTools

  * [#5675](https://github.com/Dart-Code/Dart-Code/issues/5675): DevTools no longer opens in external tabs in Firebase Studio when set to load embedded / in the sidebar.

  > **#5675**: DevTools opens in external tab in Firebase Studio `is bug` `on cloud ide` `in devtools`
  > If I click the Inspector button on the debug toolbar, or one of the buttons in the Flutter sidebar, I would expect those pages to open based on the `devToolsLocation` setting:
  > 
  > ```js
  >     "dart.devToolsLocation": {
  >         "default": "beside",
  >         "inspector": "sidebar"
  >     }
  > ```
  > 
  > However, they seem to always spawn new browser tabs.




## Testing

  * [#5630](https://github.com/Dart-Code/Dart-Code/issues/5630): A new setting `dart.coverageExcludePatterns` allows excluding coverage from files/folders using globs. For example you could exclude `**/generated/**` or `**/*.g.dart`.

  > **#5630**: Support excluding some folders/paths from coverage `is enhancement` `in testing` `in coverage`
  > This was [requested on Discord](https://discord.com/channels/615553440969392147/615553440969392151/1401910678356496505) by `@RedPhœnix`:
  > 
  > > I’d like to exclude certain folders from the coverage results (for example, my `lib/l10n/generated` folder), but I haven’t found a way to do that yet. Is this currently possible, or is there a workaround someone could recommend?
  > 
  > I think there are a few ways this could be supported:
  > 
  > 1. Natively by VS Code, which just drops the coverage and computes totals excluding it
  > 2. By Dart-Code, which also just drops the coverage before reporting to VS Code
  > 3. By `dart test` / `flutter test` where it doesn't collect the coverage in the first place
  > 
  > @liamappelbe what are your thoughts on (3)? It would be nicer (and perhaps faster) if we this coverage wasn't collected for these files in the first place, but it might be that the difference is negligible and we should just drop it in Dart-Code.

  * [#5654](https://github.com/Dart-Code/Dart-Code/issues/5654): Starting an integration test will now show a progress notification while the app build is in-progress, which will be hidden once the test begins and produces some output to the debug console.

  > **#5654**: Show some feedback when starting an integration test while build is in-progress `is enhancement` `in flutter` `in testing`
  > **Describe the bug**
  > When launching a test with Flutter integration_test on a device or emulator, there is no feedback besides a spinner on "Dart" in the "Test Results" sidebar indicating that a build is occurring. Sometimes this spinner doesn't appear either
  > 
  > This is especially problematic when trying to run tests on multiple targets at the same time
  > 
  > **To Reproduce**
  > - Create a test with IntegrationTestWidgetsFlutterBinding.ensureInitialized();
  > - Click Debug button in file or Debug Tests in explorer view
  > 
  > **Expected behavior**
  > There should be a popup notification and some lines in debug console indicating a build is occurring, like when you perform a regular app run
  > 
  > **Screenshots**
  > Only after the build is complete is a debug console tab created and the "Running Gradle task..." message appears
  > 
  > **Please complete the following information:**
  > 
  > _(truncated)_




## Commands

  * [#5665](https://github.com/Dart-Code/Dart-Code/issues/5665): The **Dart: Add Dependency** command now supports space separators in addition to commas.

  > **#5665**: Support space separators in `Dart: Add Dependency` instead of only commas `is enhancement` `in commands`
  > **Describe the bug**
  > Adding dependencies resulted in a bug.
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > Select `Dart: Add Dependency` and write `get_it watch` (select `watch_it`)
  > See:
  > 
  > ```
  > [qr_code] flutter pub add get_it watch_it
  > Not a valid package name: "null"
  > 
  > Usage: dart pub add [options] [:][:descriptor]
  >        [:][:descriptor] ...]
  > -h, --help               Print this usage information.
  >     --[no-]offline       Use cached packages instead of accessing the network.
  > -n, --dry-run            Report what dependencies would change but don't change
  >                          any.
  >     --[no-]precompile    Build executables in immediate dependencies.
  > -C, --directory=    Run this in the directory .
  > 
  > Run "dart help" to see global options.
  > See https://dart.dev/tools/pub/cmd/pub-add for detailed documentation.
  > Failed to update packages.
  > exit code 64
  > ```
  > 
  > **Expected behavior**
  > For the option to add multiple packages to work.
  > 
  > **Repro**:
  > 
  > https://github.com/FMorschel/qr_code
  > 
  > _(truncated)_




## Features/Fixes Enabled with Future SDKs

The following items depend on changes to the Dart/Flutter SDKs that have not yet been released to stable channels. They may be available to test in the current beta/master channels and will show up in future SDK releases.

  * [#5599](https://github.com/Dart-Code/Dart-Code/issues/5599): Go-to-Definition / `ctrl/cmd`+`click` on keywords like `return`, `break`, `continue` will now jump to the related function/statement.

  > **#5599**: Support Go-to-Definition / ctrl+click on keywords like `return`, `break`, `continue` `is enhancement` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > Release notes placeholder for work done as part of https://github.com/dart-lang/sdk/issues/50532 / https://dart-review.googlesource.com/c/sdk/+/441520

  * [#4844](https://github.com/Dart-Code/Dart-Code/issues/4844): When the text cursor is on a keyword like `return`, `break`, `continue`, other exit points of the same function/statement will be highlighted.

  > **#4844**: Show all function exit points by clicking on `return` or the return type `is enhancement` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > **Is your feature request related to a problem? Please describe.**
  > 
  > Eclipse has a nice feature where clicking on either a `return` statement or the return type of a function, all the exit points of the function are highlighted (whether they are `return` statements, `throw` statements, etc.).
  > 
  > Dart doesn't have checked exceptions, so doing this in Dart won't give the user a complete view of all the ways a function can exit (well, to be fair, Java also has unchecked exceptions, so it's not complete for Java either) -- but even being able to easily spot most of the return points in Dart would be really helpful.




### Flutter Widget Previewer Preview

  * [#5649](https://github.com/Dart-Code/Dart-Code/issues/5649)/[#5650](https://github.com/Dart-Code/Dart-Code/issues/5650): An experimental flag `experimentalFlutterWidgetPreview` enables an early preview of the [Flutter Widget Previewer](https://docs.flutter.dev/tools/widget-previewer) which can be shown in the sidebar or an editor tab using the `dart.experimentalFlutterWidgetPreviewLocation` setting. Unlike the command-line version of the previewer, embedding in VS Code requires a Flutter version `>=3.36.0-1` (currently the `master` channel). Feedback about the previewer itself should be posted to https://github.com/flutter/flutter and feedback on the integration with VS Code to https://github.com/Dart-Code/Dart-Code.

  > **#5649**: Ship an (experimental) integration of the Flutter Widget Preview `is enhancement` `in flutter` `in editor` `in flutter widget preview`
  > There's also https://github.com/Dart-Code/Dart-Code/issues/2620, but using this one as a task list for things that are remaining.
  > 
  > - [x] Ensure the version in Capabilities is set correctly to a version that includes all the required flags
  > - ~~Add support for multiple Flutter projects (currently we just pick the first one in the workspace)~~ moved to https://github.com/Dart-Code/Dart-Code/issues/5671
  > - [x] Pass DevTools and DTD server URIs so the preview doesn't start its own
  > - ~~Add new icon for Sidebar version (this is in two places - container + view)~~ moved to https://github.com/Dart-Code/Dart-Code/issues/5672

