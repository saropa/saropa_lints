# Dart-Code v3-86

For instructions on installing the Dart or Flutter extensions, [go here](/#installation).

# v3.86.0 _2024-04-02_

## Editor

  * [#5035](https://github.com/Dart-Code/Dart-Code/issues/5035): Modifying a `pubspec_overrides.yaml` file will now trigger `pub get` in the same way as modifying `pubspec.yaml`.

  > **#5035**: Trigger "pub get" when modifying pubspec_overrides.yaml `is enhancement` `in editor`
  > In the same way we do for `pubspec.yaml`, we should trigger `pub get` for `pubspec_overrides.yaml` since it also affects the resolved packages.

  * [#5021](https://github.com/Dart-Code/Dart-Code/issues/5021): The Dart language status information (accessed from the `{}` icon next to the current editors language which shows the status of the Dart tooling services) is now visible for virtual Dart files that don’t use the `file:` scheme.

  > **#5021**: Language status information doesn't show up for generated file schemes `is bug` `in editor`
  > For `file:///....dart`:
  > 
  > ![image](https://github.com/Dart-Code/Dart-Code/assets/1078012/6817775f-dc81-4371-b667-cd56d0e46254)
  > 
  > For `dart-macro+file:///....dart`:
  > 
  > ![image](https://github.com/Dart-Code/Dart-Code/assets/1078012/81dc2bae-5868-4515-8920-31125ae2e90c)




## Flutter

[#5031](https://github.com/Dart-Code/Dart-Code/issues/5031): A new setting `dart.hotReloadPatterns` allows setting custom globs for which modified files should trigger a Hot Reload:

  > **#5031**: Please support hot reload for certain assets  `is enhancement` `in flutter` `in editor` `in debugging`
  > I've a Flutter app that contains a lot of markdown files as assets and needs to display them.
  > 
  > Changing such a file doesn't automatically trigger a hot reload so I have to manually press the yellow lightening button to verify whether my changes to those files look good. It would improve _quality of life_ if this could happen automatically.
  > 
  > Hence, it would be nice if the plugin would use the `pubspec` file to find all assets and then optionally also hot reload if those assets are changed. Or just add `md` to the list of watched files in the  `shouldHotReloadFor` function :)

    
    
    "dart.hotReloadPatterns": [
    	"**/*.md", // All .md files
    	"**/assets/**", // Everything in assets
    ]
    

## Misc

  * [#5025](https://github.com/Dart-Code/Dart-Code/issues/5025): When the `dart.openDevTools` setting is set to always open DevTools on starting a debug session, non-Flutter web apps will no longer trigger a prompt asking “Which DevTools page?” and will instead launch the default page.

  > **#5025**: Running web app triggers "Which DevTools page?" prompt `is bug`
  > Split from https://github.com/Dart-Code/Dart-Code/issues/5024
  > 
  > > in the VS window, I see a Which DevTools page? in the command palette, with choices ranging from Open Widget Inspector Page to Open DevTools in Web Browser. I choose this latter option. A new browser window opens with 'Connected app'.
  > 
  > My guess is that the auto-open-inspector setting may be set, but we shouldn't be prompting here, we should just automatically be opening the inspector?

  * [#5020](https://github.com/Dart-Code/Dart-Code/issues/5020): The Dart Tooling Daemon is no longer spawned for internal Bazel workspaces where it may not be available.

  > **#5020**: DTD should be disabled for internal bazel workspaces `is bug` `in dtd`
  > DTD isn't available for internal builds and is currently triggering this error:
  > 
  > ![image](https://github.com/Dart-Code/Dart-Code/assets/1078012/67317111-3dbc-46b0-967d-9b33529465eb)
  > 
  > > [DartToolingDaemon] [Error] Could not find /usr/lib/google-dartlang/bin/snapshots/dart_tooling_daemon.dart.snapshot. Have you built the full Dart SDK?
  > 
  > We currently assume all SDKs over a certain version have DTD available but this isn't the case here. We should disable DTD for Bazel workspaces.




## Features/Fixes Enabled with Future SDKs

The following items depend on changes to the Dart/Flutter SDKs that have not yet been released to stable channels. They may be available to test in the current beta/master channels and will show up in future SDK releases.

  * [#5048](https://github.com/Dart-Code/Dart-Code/issues/5048): Flutter Outline, CodeLens and some other features that rely on outline information from the Dart Analysis Server are now sent for newly-opened files instead of requiring a modification to the file to show up.

  > **#5048**: dart/textDocument/publishOutline (and other notifications) are not sent for newly opened files `is bug` `in editor` `relies on sdk changes`
  > While investigating https://github.com/Dart-Code/Dart-Code/issues/5047, I opened my augmentation testing project. It had `main_augmentation.dart` already open and in the logs I see a `dart/textDocument/publishOutline` for that file.
  > 
  > If I then click "Go to Augmented" CodeLens, it opens `main.dart`, but no outline is ever sent.
  > 
  > I suspect there is some race here, but it's the main reason of hitting the 5s timeout in https://github.com/Dart-Code/Dart-Code/issues/5047 and fixing this might be a better way to handle it (because changing the timeout of not waiting is a trade-off with negative consequences noted in https://github.com/microsoft/vscode/issues/208900).

  * [#5047](https://github.com/Dart-Code/Dart-Code/issues/5047): “Run”/”Debug” CodeLenses no longer sometimes take up to 5s to appear or cause other CodeLenses to be delayed for 5s.

  > **#5047**: main method CodeLens provider can take 5s, delaying interaction with other CodeLenses `is bug` `in editor` `relies on sdk changes`
  > When testing Augmentation/Augmented CodeLens, I frequently see 5s delays in being able to interact with them. This appears to be caused by the main CodeLens provider taking a long time.
  > 
  > This happens because of the wait here:
  > 
  > https://github.com/Dart-Code/Dart-Code/blob/9a21d26228bdc4ecee5c24b264103e5c2b8fd9aa/src/extension/code_lens/main_code_lens_provider.ts#L26
  > 
  > We should  remove this wait and instead return no items if the outline isn't ready, and schedule a (one-time) refresh of CodeLens once the outline updates.

  * [#5030](https://github.com/Dart-Code/Dart-Code/issues/5030): The VS Code Outline view will no longer sometimes fail to populate for files that were already open when VS Code launched.

  > **#5030**: When starting up VSCode with a fresh flutter checkout, analysis of file in active editor fails `is bug` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > This issue is in service of https://github.com/flutter/flutter/issues/144902. The goal is to make contributing to the `flutter` tool a better experience.
  > 
  > **Repro steps.** I did all of this with my local Flutter installation on the `master` branch, but I don't think this should matter for this issue.
  > 
  > 1. Open your local flutter installation in VSCode. Make sure you have at least one editor active with a dart file. I used `packages/flutter_tools/test/general.shard/bundle_builder_test.dart` for this example.
  > 2. Quit VSCode.
  > 3. With a terminal open at your local Flutter installation, `git clean -dfx` to effectively clean out any cached files.
  > 4. Open your local flutter installation in VSCode (I assume that any Dart/Flutter-enabled project should be sufficient for this). VSCode should then download relevant Flutter artifacts and build the `flutter` tool.
  > 
  > **Observed behavior.** In VSCode, make sure you have the Explorer tab open (this should include the file explorer and outline b
  > 
  > _(truncated)_

  * [#4938](https://github.com/Dart-Code/Dart-Code/issues/4938): When launching a Flutter app, more detailed build progress will now be shown in the toast notification.

  > **#4938**: Show more detailed Flutter build progress `is enhancement` `in flutter` `in debugging` `relies on sdk changes`
  > ## The Issue
  > 
  > Currently, you are only told when an application has finished building.
  > 
  > ---
  > 
  > ## Describe the solution you'd like
  > 
  > It would be much more useful to see the current build progress (like in Xcode).
  > 
  > ![IMG_4598](https://github.com/microsoft/vscode/assets/115815794/1c7838a8-eddd-469d-8a62-6015c866a850)
  > 
  > ---
  > 
  > ## Additional context
  > 
  > Ideally, this should also show the build phase, and the current completion (e.g. `Building: 73% - 27 / 37`)

