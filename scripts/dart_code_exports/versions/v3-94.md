# Dart-Code v3-94

For instructions on installing the Dart or Flutter extensions, [go here](/#installation).

# v3.94.0 _2024-08-01_

## Flutter

  * [#5180](https://github.com/Dart-Code/Dart-Code/issues/5180): Enabling a new platform no longer fails if Flutter has recently been upgraded and emits a welcome banner when trying to read config via `flutter config --machine`.

  > **#5180**: Error enabling a new platform type `is bug` `in flutter`
  > I couldn't capture the full output here, but possible it was an analytics consent or first-run banner or something in the output of `flutter config --machine` (related: https://github.com/flutter/flutter/issues/94406).
  > 
  > ![image](https://github.com/Dart-Code/Dart-Code/assets/1078012/61d06171-6e6c-4563-8730-6732d62567f4)
  > 
  > ```
  > [12:15:45 PM] [FlutterDaemon] [Info] ==> [{"id":"4","method":"daemon.getSupportedPlatforms","params":{"projectRoot":"C:\\Dev\\Test Projects\\flutter_counter"}}]
  > [12:15:45 PM] [FlutterDaemon] [Info] )
  > 	at getFlutterConfigValue (c:\Dev\Dart-Code\Dart-Code\out\dist\extension.js:24242:31)
  > 	at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
  > 	at async FlutterDaemon.checkIfPlatformGloballyDisabled (c:\Dev\Dart-Code\Dart-Code\out\dist\extension.js:14638:23)
  > 	at async FlutterDeviceManager.enablePlatformType (c:\Dev\Dart-Code\Dart-Code\out\dist\extension.js:30649:47)
  > 	at async c:\Dev\Dart-Code\Dart-Code\out\dist\extension.js:12322:21
  > 	at
  > 
  > _(truncated)_

  * [#5174](https://github.com/Dart-Code/Dart-Code/issues/5174): Wrapper scripts (that are not symlinks) named `flutter` on `PATH` inside a folder named `bin` (such as at `/usr/bin/flutter`) no longer produce invalid Flutter SDK paths leading to “Could not find Dart in your Flutter SDK” messages. Additionally, `/opt/flutter` is included as an automatic search path for the Flutter SDK.

  > **#5174**: "Could not find Dart in your Flutter SDK" message when PATH contains a bin/flutter wrapper script before the real SDK `is bug` `in flutter`
  > I get this notification when starting vscode.
  > Yet, flutter doctor shows everything is OK, and the "show log" button also shows a logfile which shows that actually, it *can* find dart. full log output here: https://gist.github.com/Dieterbe/8dc655aa221d497726018543e8d0a477
  > 
  > ```
  > Could not find Dart in your Flutter SDK. Please run 'flutter doctor' in the terminal then reload the project once all issues are resolved.
  > ```
  > 
  > ![image](https://github.com/Dart-Code/Dart-Code/assets/20774/a7a3c432-5037-4f3d-8312-be8aaf36e6cd)
  > 
  > the flutter doctor output is this:
  > ```
  > [✓] Flutter (Channel stable, 3.22.2, on Arch Linux 6.9.7-arch1-1, locale en_US.utf-8)
  >     • Flutter version 3.22.2 on channel stable at /opt/flutter
  >     • Upstream repository https://github.com/flutter/flutter.git
  >     • Framework revision 761747bfc5 (4 weeks ago), 2024-06-05 22:15:13 +0200
  >     • Engine revision edd8546116
  >     • Dart version 3.4.3
  >     • DevTools version 2.34.3
  > 
  > [✓] Android toolchain - develop for Andro
  > 
  > _(truncated)_

  * [#5164](https://github.com/Dart-Code/Dart-Code/issues/5164): Stepping into Dart SDK sources when using the latest Flutter `beta` no longer downloads additional copies of source files from the VM when they should be opened from disk.

  > **#5164**: Stepping into Dart SDK sources in Flutter results in sources downloaded from the VM instead of used from disk `is bug` `in flutter` `in debugging`
  > Some integration tests are failing because when we step into SDK sources, we don't get back a path for the stack frames:
  > 
  > ![image](https://github.com/Dart-Code/Dart-Code/assets/1078012/8a1f296f-ab34-46aa-8c3c-258b5a0cce7a)
  > 
  > This happens with current `master` (21d996929bb96facd791d650d1ad35e6024d44ae) but only for `flutter-tester` (`"args": [ "-d", "flutter-tester" ]`). Using the Windows device things are fine:
  > 
  > ![image](https://github.com/Dart-Code/Dart-Code/assets/1078012/d0f75042-fcdb-4b6b-b97d-aa1f29498201)
  > 
  > This is possibly a Flutter issue, but needs some more investigation to see what the difference in traffic is over the VM Service.




## Debugger

  * [#5183](https://github.com/Dart-Code/Dart-Code/issues/5183)/[#5204](https://github.com/Dart-Code/Dart-Code/issues/5204): Issues where Flutter debug sessions on Windows would fail to launch when using VS Code 1.92 (currently Insiders) have been resolved.

  > **#5183**: Launching a new app in VSCode fails quickly with no error in VS Code insiders `is bug` `in debugging` `important`
  > **Describe the bug**
  > Attempting to launch either an old app or a freshly generated new app using VSCode's "Run" option briefly shows the debugger controls, then stops. I've checked extension outputs and vscode's developer console for errors, but nothing reveals any insight. When running from command line with "flutter run", the app launches successfully.
  > 
  > **To Reproduce**
  > 1. Start with a clean checkout of flutter stable (version and system info below)
  > 2. Generate a fresh app
  > 3. Use VSCode to try running it
  > 4. Observe it doesn't launch
  > 
  > **Hints**
  > I've found that adding the setting `"dart.useLegacyDebugAdapters": true` to my project allows it to be successfully launched by vscode. I assume it's related to something failing with using the non-legacy debug adapter. If I could find some logs for that, I'm sure the issue might be clearer.
  > 
  > 
  > 
  > Workspace Environment
  > 
  > ```text
  > Dart Code extension: 3.92.0
  > Flutter extension: 3.93.20240702 (activated)
  > 
  > App: Visual Studio Code - I
  > 
  > _(truncated)_

  * [#5191](https://github.com/Dart-Code/Dart-Code/issues/5191): Debug sessions no longer fail to start if the Dart Tooling Daemon failed to start.

  > **#5191**: Ensure a failure to start DTD does not break functionality that does not depend on DTD `is enhancement`
  > See https://github.com/flutter/flutter/issues/151375#issuecomment-2231180224
  > 
  > For now, most of the extension doesn't rely on DTD, so if it fails to start we should alert the user and provide a log, but most functionality should be able to work without it (the same as if using an SDK that doesn't have it).

  * [#4734](https://github.com/Dart-Code/Dart-Code/issues/4734): A change so that breakpoints are resolved eagerly and should turn red (if valid) immediately rather than only when the function first executes is now in the Flutter/Dart `beta` channel. Additionally, an issue that could cause breakpoints to appear to jump to the wrong line (even though internally they were still set on the requested line) has been resolved.

  > **#4734**: Breakpoints are not resolved (they appear greyed in the editor) until just before they are executed `is bug` `in debugging` `relies on sdk changes`
  > **Describe the bug**
  > I have a Dart API project, and I can't create breakpoints after updating to v3.72.2. There is no issue with v3.70.0.
  > 
  > **Expected behavior**
  > Be able to create breakpoint
  > 
  > **Screenshots**
  > 
  > 
  >  - Operating System and version: macOS Ventura Version 13.5.2 (22G91)
  >  - VS Code version: 1.82.0
  >  - Dart extension version: v3.72.2
  >  - Dart/Flutter SDK version:  Dart 3.1.1 / Flutter 3.13.3
  >  
  >  
  > ```
  > !! PLEASE REVIEW THIS LOG FOR SENSITIVE INFORMATION BEFORE SHARING !!
  > 
  > Dart Code extension: 3.72.2
  > Flutter extension: 3.72.0 (activated)
  > 
  > App: Visual Studio Code
  > App Host: desktop
  > Version: 1.82.0
  > Platform: mac
  > 
  > Workspace type: Dart
  > Analyzer type: LSP
  > Multi-root?: true
  > 
  > Dart SDK:
  >     Loc: /Users/hasimyerlikaya/flutter/bin/cache/dart-sdk
  >     Ver: 3.1.1
  > Flutter SDK:
  >     Loc: /Users/hasimyerlikaya/flutter
  >     Ver: 3.13.3
  > 
  > HTTP_PROXY: undefined
  > NO_PROXY: undefined
  > 
  > Logging Categories:
  >     General, AnalyzerTiming, CommandProcesses, DartTest, DAP, VmSer
  > 
  > _(truncated)_




## Editor

  * [#5156](https://github.com/Dart-Code/Dart-Code/issues/5156): Using analysis server plugins on the latest Dart/Flutter beta no longer produces errors like “URI scheme ‘c’ is not supported” on Windows.

  > **#5156**: "URI scheme 'c' is not supported" error using analyzer plugins with Dart 3.5 pre-release `is bug` `in editor` `in lsp/analysis server`
  > Hi,
  > Whenever I'm editing Dart code in a Flutter project in VS code, I get the following persistent notification:
  > 
  > ```shell
  > Socket error: Invalid argument (uri): URI scheme 'c' is not supported. Allowed schemes are 'file', 'dart-macro+file'.: Socket error: Invalid argument (uri): URI scheme 'c' is not supported. Allowed schemes are 'file', 'dart-macro+file'.: "c:/Users/chris/src/ai_halls/lib/main.dart"
  > ```
  > 
  > This does not happen with regular dart projects.
  > 
  > Cheers,
  > 
  > Chris

  * [#5192](https://github.com/Dart-Code/Dart-Code/issues/5192): Modifying a pubspec in a template project (something that contains `__` or `{` in the folder name) no longer triggers `pub get`.

  > **#5192**: Modifying a pubspec in a template project triggers `pub get` `is bug` `in editor` `in commands`
  > **Describe the bug**
  > 
  > #4581 seems to have regressed.
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > 1. Clone 
  > 2. Open it in VS Code
  > 3. Watch the Flutter extension complain about invalid packages*
  > 4. Alternatively, open a file and notice that it's all red
  > 
  > Admittingly, I can't reproduce this this morning, but I could yesterday evening.
  > 
  > **Expected behavior**
  > 
  > It should ignore everything below `__brick__`.
  > Ideally for all diagnostics, but at least for `pub get`
  > 
  > **Screenshots**
  > 
  > 
  > 
  > **Please complete the following information:**
  > 
  > 
  > 
  > Workspace Environment
  > 
  > ```text
  > Dart Code extension: 3.92.0
  > Flutter extension: 3.92.0 (activated)
  > 
  > App: Visual Studio Code
  > App Host: desktop
  > Version: mac 1.91.1
  > 
  > Workspace type: Dart, Flutter (LSP)
  > 
  > Dart (3.4.1): /opt/homebrew/Caskroom/flutter/3.19.5/flutter/bin/cache/dart-sdk
  > Flutter (3.22.1): /opt/homebrew/Caskroom/flutter/3.19.5/flutter (No device)
  > 
  > ```
  > 
  > 
  > 
  > 
  > 
  > Output from 'dart info'
  > 
  > `/opt/homebrew/Caskroom/f
  > 
  > _(truncated)_

  * [#5189](https://github.com/Dart-Code/Dart-Code/issues/5189): Manually saving a `pubspec.yaml` in a project named `build` (such as `pkg:build`) now triggers `pub get` (file changes on disk for folders named `build` still do not).

  > **#5189**: Editing pubspec in a checkout of pkg:build never runs `pub get` `is bug`
  > While starting to look at https://github.com/Dart-Code/Dart-Code/issues/5067, I noticed that we were skipping `pub get` for reasons other than what we want:
  > 
  > https://github.com/Dart-Code/Dart-Code/blob/0ec08a043772f0fbdfa74aac37ee1b98e0aa3325/src/extension/commands/packages.ts#L165-L169
  > 
  > We should figure out a better way to handle this.




## Commands

  * [@rodrigogmdias](https://github.com/rodrigogmdias) contributed [#5175](https://github.com/Dart-Code/Dart-Code/issues/5175): A new command **Pub: Get Packages for All Projects** will fetch packages for all projects in the workspace instead of only the project for the active file.

  > **#5175**: Feature: Add command to get packages from all projects `is enhancement` `in commands`
  > This Pull Request adds a new command to the DartCode extension for Visual Studio Code, enabling users to `run pub get` for *all Dart projects* within the workspace. This feature streamlines the process of fetching dependencies for multiple projects, enhancing productivity and efficiency.
  > 
  > # Changes
  > - Added a new command dart.getAllPubGet to execute pub get for all projects.
  > - Updated the command palette to include the new command.
  > - Modified the extension activation logic to register the new command.




## DevTools

  * [#5208](https://github.com/Dart-Code/Dart-Code/issues/5208): Opening static [DevTools extensions](https://docs.flutter.dev/tools/devtools/extensions) no longer fails when there are no active debug sessions.

  > **#5208**: Unable to open static DevTools extensions on current Flutter beta `is bug` `in devtools` `in flutter sidebar`
  > Using the current Flutter beta and opening the [app_that_uses_foo](https://github.com/flutter/devtools/tree/master/packages/devtools_extensions/example/app_that_uses_foo) project, the sidebar shows the extension but fails to launch if there is not debug session.
  > 
  > This is because the `requiresDebugSession` flag defaults to true (sidebar does not currently pass it) unless we _know_ that the target is a static page (which we only do for 1p pages, because they are hard-coded into Dart-Code).
  > 
  > As a workaround until sidebar is passing the flags, we should:
  > 
  > - if the target page is an `_ext` page and neither `requiresDebugSession` or `prefersDebugSession` are explicitly set
  > - downgrade from `requiresDebugSession` to `prefersDebugSession`
  > 
  > This fixes the issue, but there are some side-effects or doing this:
  > 
  > 1. Attempting to launch a static tool when there are > 1 debug sessions active will prompt the user to select one (even though the tool won't use it)
  > 2. Attempting to launch a 
  > 
  > _(truncated)_

  * [#5089](https://github.com/Dart-Code/Dart-Code/issues/5089): Icons used in the debug toolbar for launching DevTools have been updated to better match the icons used within DevTools.

  > **#5089**: Use official icons for Flutter / DevTools `is enhancement` `in devtools`
  > Tracking on the VS code side. This is related to https://github.com/flutter/flutter-intellij/issues/6595. Flutter UX is working on providing a new set of icons for IDEs / DevTools.




## Misc

  * [#5067](https://github.com/Dart-Code/Dart-Code/issues/5067): Using [Pub Workspaces](https://github.com/dart-lang/pub/issues/4127) no long results in spurious notifications of needing to run `pub get` because projects don’t have their own `.dart_tool/package_config.json` file.

  > **#5067**: Support Pub workspaces `is enhancement`
  > Changes in https://github.com/dart-lang/sdk/issues/53875 might affect assumptions made in the extension here about the location of `package_config.json` relative to a `pubspec.yaml`. When that work is done enough, we should review all places that look for / read a `package_config.json` and ensure they behave correctly in monorepos.
  > 
  > - [x] Initial startup check whether "pub get" needs running
  > - [ ] TODO: Check anywhere else we're looking at package_configs

  * [#5155](https://github.com/Dart-Code/Dart-Code/issues/5155): Improvements have been made to extension shut down to reduce the chance of orphaned processes after closing VS Code.

  > **#5155**: Dart/Flutter processes left orphaned after IDE was closed  `is bug`
  > **Describe the bug**
  > Dart daemon was left hanging when IDE was closed.
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > 1. In the terminal, I ran `flutter build appbundle`.
  > 2. While it was loading, I started a debug session of my Flutter app.
  > 3. Building completed from the terminal.
  > 4. After waiting longer than usual, "Running gradle assemble debug" message would not leave and at the debug console it got stuck with "Launching lib\main.dart on PHONE in debug mode..." even when the app on my phone had already started and I was able to use it completely fine.
  > 5. I tried to terminate the debug session with multiple clicks to the stop button, no use because of some bug.
  > 6. Closed the IDE instead.
  > 7. Opened Task Manager and saw that `dart.exe daemon` was still running.
  > 
  > **Expected behavior**
  > No `dart.exe` left running.
  > 
  > **Please complete the following information:**
  > 
  > 
  > 
  > Workspace Environment
  > 
  > ```text
  > Dart Code extension: 3.90.0
  > Flutter extension: 3.91.20240529 (activ
  > 
  > _(truncated)_

  * [@FMorschel](https://github.com/FMorschel) contributed [#5203](https://github.com/Dart-Code/Dart-Code/issues/5203): Improved the descriptions on log settings that support substitutions like `~`.

  > **#5203**: Update settings descriptions to note substituion of `~` for homedir
  > Adding the option to replace `~` for the home directory in paths that use backslashes.
  > 
  > Also, making clearer that only the noted substitutions are allowed and everything else will be left in the path as-is.

  * [@FMorschel](https://github.com/FMorschel) contributed [#5188](https://github.com/Dart-Code/Dart-Code/issues/5188): Fixed typos and improved consistency of log settings descriptions.

  > **#5188**: Fixing typo and consistency
  > This PR only fixes a typo and adds more consistency between all descriptions of legacy log options that allow an entry of `${name}` in log file paths.

  * [#5184](https://github.com/Dart-Code/Dart-Code/issues/5184): Using variables like `${name}` or `${kind}` in the name of a _folder_ for debugging logs no longer results in empty folders being created with those literal tokens before the debug session starts.

  > **#5184**: Using `${name}` in a folder of a log name results in `"${name}"` folders being created `is bug`
  > If I set my logs as below, I see a folder called `"${name}"` created.
  > 
  > This is because we trigger creation of the folder before the debug session name is inserted.
  > 
  > ```js
  > {
  > 	"dart.dapLogFile": "C:\\logs\\${workspaceName}\\dapLogFile.txt",
  > 	"dart.analyzerLogFile": "C:\\logs\\${workspaceName}\\analyzerLogFile.txt",
  > 	"dart.dartTestLogFile": "C:\\logs\\${workspaceName}\\${name}\\dartTestLogFile.txt",
  > 	"dart.extensionLogFile": "C:\\logs\\${workspaceName}\\extensionLogFile.txt",
  > 	"dart.devToolsLogFile": "C:\\logs\\${workspaceName}\\devToolsLogFile.txt",
  > 	"dart.vmServiceLogFile": "C:\\logs\\${workspaceName}\\${name}\\vmServiceLogFile.txt",
  > 	"dart.webDaemonLogFile": "C:\\logs\\${workspaceName}\\${name}\\webDaemonLogFile.txt",
  > 	"dart.flutterRunLogFile": "C:\\logs\\${workspaceName}\\${name}\\flutterRunLogFile.txt",
  > 	"dart.flutterTestLogFile": "C:\\logs\\${workspaceName}\\${name}\\flutterTestLogFile.txt",
  > 	"dart.flutterDaemonLogFile": "C:\\logs\\${workspaceName}\\flutterDaemonLogFi
  > 
  > _(truncated)_

  * [#5154](https://github.com/Dart-Code/Dart-Code/issues/5154): All log files now support `${workspaceName}` which will be replaced by the name of the current open workspace/folder.

  > **#5154**: Workspace name/folder as macro for log `is enhancement`
  > **Is your feature request related to a problem? Please describe.**
  > I received instructions to set the extension to save log files. E.g.:
  > 
  > ```json
  > "dart.flutterRunLogFile": "C:\\Dev\\Logs\\flutter_run.txt",
  > "dart.vmServiceLogFile": "C:\\Dev\\Logs\\vm_service.txt",
  > "dart.dapLogFile": "C:\\Dev\\Logs\\dap.txt",
  > ```
  > 
  > When looking for these in VSCode settings, I found out about `${name}` being supported inside the path as a macro for the debug session name.
  > 
  > However, I was also instructed to set these settings for each workspace so that different workspaces don't conflict with each other. Which is a little too verbose when having lots of projects that you'd like to log.
  > 
  > **Describe the solution you'd like**
  > I'd like for the extension to support `${folder}` or `${workspace}` or similar so that I can create a path like `~/dev/logs/${workspace}/${name}`.
  > 
  > **Describe alternatives you've considered**
  > Manually creating an inner folder for each workspace and defining it to the work
  > 
  > _(truncated)_

  * [#5187](https://github.com/Dart-Code/Dart-Code/issues/5187): `dart.dapLogFile` now supports using `${name}` to insert the debug session name (matching other debugging log files).

  > **#5187**: dapLogFile doesn't capture anything + doesn't support `${name}` `is bug`
  > I had this in my settings:
  > 
  > ```
  > "dart.dapLogFile": "C:\\Dev\\Test Projects\\dartcode_5154\\logs\\${workspaceName}\\dapLogFile.txt",
  > ```
  > 
  > But the file never shows up, even when I run tests, tun the app, etc.

  * [#5186](https://github.com/Dart-Code/Dart-Code/issues/5186): Debugging log files now support using `${kind}` to insert a description of the kind of debug session (`dart`, `dart_test`, `flutter`, `flutter_test`).

  > **#5186**: Allow separate DAP log files for dart/flutter run/attach/test `is enhancement`
  > These settings are only used by the legacy DAP, but we could set up a logger when we spawn the debug session (and close it when the session ends) to support them here.

  * [#5186](https://github.com/Dart-Code/Dart-Code/issues/5186): Legacy debugging log file settings are now in the “Legacy” settings section.

  > **#5186**: Allow separate DAP log files for dart/flutter run/attach/test `is enhancement`
  > These settings are only used by the legacy DAP, but we could set up a logger when we spawn the debug session (and close it when the session ends) to support them here.




## Features/Fixes Enabled with Future SDKs

The following items depend on changes to the Dart/Flutter SDKs that have not yet been released to stable channels. They may be available to test in the current beta/master channels and will show up in future SDK releases.

  * [#5205](https://github.com/Dart-Code/Dart-Code/issues/5205): “Go to Type Definition” now works for `for-in` loop variables.

  > **#5205**: Not able to "Go to Type Definition" in `for-in` loop variable `is bug` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > **Describe the bug**
  > Not being able to "Go to Type Definition" in `for-in` loop variable.
  > 
  > **To Reproduce**
  > 
  > ```dart
  > void main() {
  >   const list = [1, 2, 3];
  >   for (final value in list) {
  >     
  >   }
  > }
  > ```
  > 
  > Steps to reproduce the behavior:
  > 1. Create an empty project
  > 2. Add the code sample
  > 3. Press the second mouse button on the `value` variable to see the tooltip
  > 4. Click "Go to Type Definition"
  > 5. See message `No type definition found for 'value'`
  > 
  > **Expected behavior**
  > To be able to see type definition on anything that has a type.
  > 
  > **Screenshots**
  > ![image](https://github.com/user-attachments/assets/ca3abeb2-73dd-4ce0-a773-a2655e3d5f3a)
  > 
  > **Please complete the following information:**
  > 
  > 
  > 
  > Workspace Environment
  > 
  > ```text
  > Dart Code extension: 3.93.20240723
  > Flutter extension: 3.93.20240702 (activated)
  > 
  > App: Visual Studio Code
  > App Host: desktop
  > Version: win 1.91.1
  > 
  > Workspace type: Dart (LSP)
  > Workspace name: bug
  > 
  > Dart (3.6.0-36.0.dev): C:\Users\felip_0v
  > 
  > _(truncated)_

  * [#5202](https://github.com/Dart-Code/Dart-Code/issues/5202): The “Don’t show again” option for “Project contains issues that can be fixed by dart fix” prompt now correctly persists across sessions.

  > **#5202**: "Don't show again" option for "Project contains issues that can be fixed by dart fix" prompt does not persist `is bug` `in lsp/analysis server` `relies on sdk changes`
  > **Describe the bug**
  > 
  > ![image](https://github.com/user-attachments/assets/1129a5bd-2ce7-4bae-b104-30a4d3cebdc5)
  > 
  > `Don't Show Again" does nothing.
  > 
  > **To Reproduce**
  > Not entirely sure what triggers this notification, but, currently, I have:
  > 
  > ![image](https://github.com/user-attachments/assets/bd0b28d5-6faf-4dcd-93c0-ce456a96a78f)
  > 
  > **Expected behavior**
  > Once I click Don't Show Again, I don't want it to be shown again.
  > 
  > 
  > 
  > Workspace Environment
  > 
  > ```text
  > Dart Code extension: 3.92.0
  > Flutter extension: 3.92.0 (activated)
  > 
  > App: Visual Studio Code
  > App Host: desktop
  > Version: win 1.91.1
  > 
  > Workspace type: Flutter (LSP)
  > 
  > Dart (3.4.4): C:\Users\jckod\flutter\bin\cache\dart-sdk
  > Flutter (3.22.3): C:\Users\jckod\flutter (moto g 6 plus (android-arm64/android))
  > 
  > ```
  > 
  > 
  > 
  > 
  > 
  > Output from 'dart info'
  > 
  > `C:\Users\jckod\flutter\bin\cache\dart-sdk\bin\dart.exe info`
  > 
  > If providing this information as part of reporting a bug, please review the information
  > below to ensure it on
  > 
  > _(truncated)_

  * [#5169](https://github.com/Dart-Code/Dart-Code/issues/5169): “Format Selection” can no longer format the entire file if the algorithm to minimize edits fails.

  > **#5169**: "Format Selection" can format the entire file `is bug` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > ### Repro
  > 
  > 1. Have your local flutter/flutter checkout at commit [4cb6d384926fe831697e1e6cc88a6deb8d602071](https://github.com/andrewkolos/flutter/commit/4cb6d384926fe831697e1e6cc88a6deb8d602071) (near master at the time of writing)
  > 2. Open your flutter checkout in VSCode.
  > 3. Open `packages/flutter_tools/lib/src/compile.dart`
  > 4. Move your cursor to any line of code. I happened to choose [this one](https://github.com/flutter/flutter/blob/e410b7cd5e01554f899d43c5b2a8ee5baea7e760/packages/flutter_tools/lib/src/compile.dart#L23).
  > 5. Open the command palette, run the `Format Selection` command.
  > 
  > **Expected result.** The selected line should be formatted like so
  > 
  > ```dart
  > // Before
  > const List kDartCompilerExperiments = [
  > ];
  > 
  > // After
  > const List kDartCompilerExperiments = [];
  > ```
  > 
  > **Observed result.** The entire file gets formatted.
  > 
  > ### Diagnostics
  > 
  > 
  > 
  > Workspace Environment
  > 
  > ```text
  > Dart Code extension: 3.92.0
  > Flutter extension: 3.93.20240702 (activated)
  > 
  > App: Vi
  > 
  > _(truncated)_

  * [#5198](https://github.com/Dart-Code/Dart-Code/issues/5198)/[#5200](https://github.com/Dart-Code/Dart-Code/issues/5200): Formatting no longer fails to produce minimal edits (which can result in breakpoints positions being lost) for various kinds of formatting changes including collapsing empty collections from multiple lines into one, removal of trailing whitespace in comments, wrapping/unwrapping of consecutive `>` in type parameters.

  > **#5198**: Formatting does not produce minimal edits when empty collections are unwrapped onto a single line `is bug` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > Splitting this from https://github.com/Dart-Code/Dart-Code/issues/5169 as there are two issues.
  > 
  > - https://github.com/Dart-Code/Dart-Code/issues/5169 will deal with Format Selection incorrectly formatting the entire document (this should never happen, regardless of whether or not we can minimize the format edits)
  > - The formatter unwrapping `[\n]` should not result in us failing to compute minimal edits
  > 
  > With just the first issue fixed, we'll produce no edits instead of formatting the entire document. However, we should really produce an edit just for unwrapping the empty collection.
  > 
  > Example:
  > 
  > ```dart
  > var a = [
  > ];
  > var b = '';
  > ```
  > 
  > Should format to:
  > 
  > ```dart
  > var a = [];
  > var b = '';
  > ```
  > 
  > ...without falling back to full-document formats.
  > 
  > Currently it fails because the start code gets two tokens (an open bracket and a close bracket) but the end code gets a single simpletoken that is `[]`.

  * [#5199](https://github.com/Dart-Code/Dart-Code/issues/5199): Displaying numbers as hex in the debugger now applies to lists from `dart:typed_data` such as `Uint8List`.

  > **#5199**: Displaying numbers as hex in debugger does not apply to dart:typed_data lists like Uint8List `is bug` `in debugging` `relies on sdk changes`
  > Reported by @NeariX67 at https://github.com/Dart-Code/Dart-Code/issues/3940#issuecomment-2247394431
  > 
  > ```dart
  > import 'dart:developer';
  > import 'dart:typed_data';
  > 
  > void main(List arguments) {
  >   var a = 1;
  >   var b = [1, 2, 3];
  >   var c = Uint8List.fromList(b);
  >   debugger();
  > }
  > ```
  > 
  > ![image](https://github.com/user-attachments/assets/50a0865a-a653-48b1-b344-cb9cd24109cd)

  * [#5153](https://github.com/Dart-Code/Dart-Code/issues/5153): Parameter hints are now available on callable classes.

  > **#5153**: No parameter hints when invoking a callable class `is bug` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > In this code:
  > 
  > ```dart
  > class Foo {
  >   int call(int a, String b) {
  >     return a + b.length;
  >   }
  > }
  > 
  > void main() {
  >   final foo = Foo();
  >   foo.call( // Auto-complete and hints are helpful.
  > }
  > ```
  > 
  > when I write `foo.call` I get helpful auto-complete and hints about the signature of the method as expected, however I could call the same method using `()`:
  > 
  > ```dart
  > void main() {
  >   final foo = Foo();
  >   foo( // No hints :(
  > }
  > ```
  > 
  > 
  > 
  > 
  > ```text
  > Dart Code extension: 3.90.0
  > Flutter extension: 3.90.0 (activated)
  > 
  > App: Visual Studio Code
  > App Host: desktop
  > Remote: ssh-remote
  > Host Kind: ssh-remote
  > Version: linux 1.90.2
  > 
  > Workspace type: Dart, Flutter (LSP)
  > 
  > Dart (3.4.3)
  > Flutter (3.22.2)
  > ```

  * [#5197](https://github.com/Dart-Code/Dart-Code/issues/5197): Running the **Dart: Capture Debugging Logs** command while a session is running is now able to capture VM Service traffic.

  > **#5197**: Supporting enabling the VM Service traffic when the session is already running `is enhancement` `in debugging` `relies on sdk changes`
  > **Is your feature request related to a problem? Please describe.**
  > As @DanTup told me on Discord, I do agree with the following:
  > 
  > > It's annoying to have a repro but already have the session running and have to hope you can repro after restarting.
  > 
  > **Describe the solution you'd like**
  > > Supporting enabling the VM Service traffic when the session is already running.
  > 
  > **Describe alternatives you've considered**
  > Having the [**Dart: Capture Debugging Logs** command](https://dartcode.org/docs/logging/#capture-debugging-logs) running at all times.
  > 
  > **Additional context**
  > None.

  * [#5193](https://github.com/Dart-Code/Dart-Code/issues/5193): Many improvements have been made to breakpoints that should reduce the chance of seeing grey/unverified breakpoints until they are hit, or breakpoints that are displayed in the wrong location after hot restarts.

  > **#5193**: Breakpoint Line Numbers incorrect/changing/been added several times `fixed in dart / flutter` `relies on sdk changes`
  > **Describe the bug**
  > I mistakenly posted this bug here https://github.com/microsoft/vscode/issues/220550 before, in which you can find all needed information, but feel free to ask further in case you want everything to be documented here as well.
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > For me, it happens while "just" adding breakpoints, but usually after the emulator aleady runs for some time.
  > 
  > **Expected behavior**
  > - Add the exact number the breakpoint has been added to ONCE (currently occasionally happens twice/three times)
  > - Do not change the number the breakpoint is on when removing and re-adding them
  > - Add the breakpoint to the correct line (happens that the breakpoint will be added to totally random other lines)
  > 
  > **Screenshots**
  > You find an example video covering some of these issues in the linked issue.
  > 
  > **Please complete the following information:**
  > 
  > You can run the **Dart: Collect Diagnostic Information** command from the VS Code command palette (`F
  > 
  > _(truncated)_

  * [#5162](https://github.com/Dart-Code/Dart-Code/issues/5162): Code completion for returning from function expressions now correctly takes into account the return type of the function and includes suggestions for things like record fields.

  > **#5162**: Autocomplete/IntelliSense does not work for functions that return a record with named fields when using an expression body. `is bug` `in lsp/analysis server` `relies on sdk changes`
  > **Describe the bug**
  > Autocomplete/IntelliSense does not work for functions that return a record with named fields when using an expression body.
  > 
  > Expression body:
  > ![image](https://github.com/Dart-Code/Dart-Code/assets/172334239/4d5513d2-57fb-4a09-b3b4-518b8c40235b)
  > Block body:
  > ![image](https://github.com/Dart-Code/Dart-Code/assets/172334239/84d3ac53-e6d2-4716-bae7-552e5359936a)
  > 
  > 
  > **To Reproduce**
  > ```dart
  > void fun(({int anInt}) Function() callback) {}
  > 
  > void main() {
  >   fun(() => ());
  > 
  >   fun(() {
  >     return ();
  >   });
  > }
  > ```
  > Trigger the autocompletion inside the returned record and you can see that only show the suggestions in the block body, and not in expression body.
  > 
  > **Expected behavior**
  > Should show the named fields suggestions.
  > 
  > **Please complete the following information:**
  > 
  > You can run the **Dart: Collect Diagnostic Information** command from the VS Code command palette (`F1`) to easily capture this information or provide it manually.
  > 
  > Dart Code extensi
  > 
  > _(truncated)_

