# Dart-Code v3-126

For instructions on installing the Dart or Flutter extensions, [go here](/#installation).

# v3.126.0 _2025-12-29_

## Flutter Widget Preview

  * [#5840](https://github.com/Dart-Code/Dart-Code/issues/5840)/[#5814](https://github.com/Dart-Code/Dart-Code/issues/5814): To improve startup performance, the widget preview now starts on first access rather than at startup. This can be controlled with a new setting `dart.flutterWidgetPreview` that accepts `"startLazily"` (default), `"startEagerly"` (starts at startup when a Flutter project is present) and `"disabled"`.

  > **#5840**: Add eager/lazy/disabled options for Widget Preview `is enhancement` `in flutter` `is performance` `in flutter widget preview`
  > This adds a setting to control whether the widget preview starts eagerly, lazily, or not at all.
  > 
  > For now, I'm changing the default to lazy, since it can consume a lot of memory and there have been a few issues - but we can consider switching it to eagerly (to make it load faster the first time if you do use it) if that becomes a better trade-off than it is today (FYI @bkonyi).
  > 
  > Fixes https://github.com/Dart-Code/Dart-Code/issues/5814




## Testing

  * [#5842](https://github.com/Dart-Code/Dart-Code/issues/5842)/[#5833](https://github.com/Dart-Code/Dart-Code/issues/5833): When running a batch of tests from the Test Explorer requires launching multiple sequential debug sessions, a progress notification will be shown indicating the number of sessions with the ability to cancel the entire batch.

  > **#5842**: Add progress notification + cancel button for multi-debug-session test runs `is enhancement` `in debugging` `in testing`
  > This makes it clearer when a test run is spanning multiple sessions and makes it possible to cancel the entire run (because we can't detect cancelling a single debug session, so doing so will continue with the next).
  > 
  > Fixes https://github.com/Dart-Code/Dart-Code/issues/5833

  * [#5831](https://github.com/Dart-Code/Dart-Code/issues/5831)/[#5834](https://github.com/Dart-Code/Dart-Code/issues/5834): Deleting a test no longer sometimes causes the next test marker to move to the incorrect line.

  > **#5831**: Deleting a test results in the next test marker moving to the wrong line `is bug` `in testing`
  > When I delete this test, the next test getter icon moves to the wrong line.
  > 
  > https://github.com/user-attachments/assets/8f305440-e50a-4ab3-8294-a4864285f4d9




## Misc

  * [#5841](https://github.com/Dart-Code/Dart-Code/issues/5841): A warning is now shown that Dart 3.1 / Flutter 3.13 will become unsupported in a future release. See the [SDK Compatibility page](/sdk-version-compatibility/) for details of which extension versions support which SDKs if you need to continue to use an unsupported SDK.

  > **#5841**: Warn that Dart 3.1 / Flutter 3.13 will become unsupported soon
  > Placeholder for release notes.. this version will warn that support for Dart 3.1 / Flutter 3.13 is being removed soon.
  > 
  > See https://github.com/flutter/flutter-intellij/pull/8646
  > See https://blog.flutter.dev/whats-new-in-flutter-3-35-c58ef72e3766#:~:text=In%20our%20next%20stable%20release%2C%20Flutter%20SDKs%20before%203.16%20will%20be%20deprecated.

  * [#5848](https://github.com/Dart-Code/Dart-Code/issues/5848): Some unexpected conditions that trigger extension restarts will now show warning notifications encouraging filing a GitHub issue for investigation.

  > **#5848**: Add/improve prompts to encourage filing bugs `is enhancement`
  > This adds/tweaks prompts to encourage users to file bugs for:
  > 
  > - Config changes < 1s after activation (this causes all services to be restarted and is not expected)
  > - Flutter daemon terminations (upgrade from info to warn, and explicitly suggest filing in the text)

  * [#5830](https://github.com/Dart-Code/Dart-Code/issues/5830): ~~Updated to LSP client v10.0.0-next.18 and enabled`delayOpenNotifications` for improved performance.~~ This change was reverted pending a fix in the VS Code LSP client.

  > **#5830**: Switch to LSP client v10.0.0-next.18 and enable delayOpenNotifications `is performance`
  > Fixes https://github.com/Dart-Code/Dart-Code/issues/5176




## Features/Fixes Enabled with Future SDKs

The following items depend on changes to the Dart/Flutter SDKs that have not yet been released to stable channels. They may be available to test in the current beta/master channels and will show up in future SDK releases.

  * [#5832](https://github.com/Dart-Code/Dart-Code/issues/5832): `formatOnType` no longer triggers when typing `;` or `}` in places that are not ends of statements/blocks (such as strings, comments, patterns).

  > **#5832**: `formatOnType` triggers when writing `;` inside a string literal `is bug` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > Repro:
  > 
  > ```dart
  > void reallyLongFunctionNameThatWillRecieveString(String parameter) {
  >   reallyLongFunctionNameThatWillRecieveString('testing that adding some chars breaks line');
  > }
  > ```
  > 
  > If you copy the above on an 80-character line project and have `formatOnType`. Once you add a `;` anywhere inside the string literal, the formatter is triggered.

  * [#5602](https://github.com/Dart-Code/Dart-Code/issues/5602): `formatOnType` no longer triggers when typing `;` inside an enhanced enum without a constructor, which caused the semicolon to be removed.

  > **#5602**: Writing `;` inside an enhanced enum without the constructor makes it get removed `is bug` `in editor` `relies on sdk changes`
  > **Describe the bug**
  > When writing `;` inside enhanced enum before it contains a constructor, it gets removed.
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > 1. In a dart file, write `enum Enhanced { e }`
  > 2. Add `;` after `e` and see the code will stay the same
  > 
  > **Expected behavior**
  > I expect the `;` to stay there so I can write the constructor.
  > 
  > **Please complete the following information:**
  > 
  > Workspace Environment
  > 
  > ```text
  > Dart Code extension: 3.115.20250715
  > Flutter extension: 3.115.20250701 (activated)
  > 
  > App: Visual Studio Code
  > App Host: desktop
  > Version: win 1.102.2
  > 
  > Workspace type: Dart (LSP)
  > Workspace name: bug
  > 
  > Dart (3.10.0-edge.7e05022286da202d366091d3efa446e6fbf685ab): C:\Users\felip_0vh5fa6\dart
  > Flutter (3.32.7): C:\Users\felip_0vh5fa6\.puro\envs\stable\flutter (No device)
  > 
  > ```
  > 
  > Output from 'dart info'
  > 
  > `C:\Users\felip_0vh5fa6\dart\bin\dart.exe info`
  > 
  > _(truncated)_

  * [#5808](https://github.com/Dart-Code/Dart-Code/issues/5808): The Flutter Sidebar no longer stops responding after the PC wakes from sleep. Instead, a “Reconnecting…” notification will be shown while re-connecting to DTD.

  > **#5808**: Flutter Sidebar stops working after PC wakes from sleep `is bug` `in flutter` `relies on sdk changes` `in flutter sidebar`
  > **Describe the bug**
  > 
  > **To Reproduce**
  > 1. Open Flutter DevTools from the IDE sidebar (VS Code)
  > 2. Select any tool (e.g., Performance, Inspector, Network, Logging)
  > 3. DevTools panel does not respond — no action happens and the UI becomes stuck
  > 
  > **Expected behavior**
  > 1. DevTools should open the selected tool immediately
  > 2. The UI should remain responsive and allow switching between different DevTools tabs without freezing
  > 
  > **Screenshots**
  > https://github.com/user-attachments/assets/bbf2e501-7cdd-4ab6-8f69-d4a4a54079d9
  > 
  > **Please complete the following information:**
  > 
  > You can run the **Dart: Collect Diagnostic Information** command from the VS Code command palette (`F1`) to easily capture this information or provide it manually.
  > 
  >  - Operating System and version: macOS Tahoe 26.1
  >  - VS Code version: 1.106.1 (Universal)
  >  - Dart extension version: 3.122.0
  >  - Dart/Flutter SDK version: 3.122.0
  >  - Target device: mobile (Android & iOS simulator)

