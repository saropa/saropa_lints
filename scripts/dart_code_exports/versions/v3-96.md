# Dart-Code v3-96

For instructions on installing the Dart or Flutter extensions, [go here](/#installation).

# v3.96.0 _2024-09-02_

## Editor

  * [#5086](https://github.com/Dart-Code/Dart-Code/issues/5086): Documentation for lint rules now shows up in code completion for lint names in `analysis_options.yaml`.

  > **#5086**: Include lint documentation in completion in analysis_options.yaml `is enhancement` `in editor` `in lsp/analysis server`
  > **Is your feature request related to a problem? Please describe.**
  > I have a relatively big `analysis_options` file in my company. And when managing it I always have to open a browser to see what some specific lints are and copy the right name.
  > 
  > **Describe the solution you'd like**
  > I'd like for the `analysis_options.yaml` file to have an autocomplete for `rules` under `linter`, and possibly to look for active `rules` to suggest under `analyzer -> errors` and maybe `analyzer -> language`.
  > 
  > As well as possibly a hint on what the rule is about with maybe the link to the docs.

  * [#5100](https://github.com/Dart-Code/Dart-Code/issues/5100): The prompt to run `dart fix` now offers to run the **Dart: Fix All in Workspace** commands instead of recommending running `dart fix` from the terminal. See the [previous release notes](/releases/#fix-all-in-workspace-commands) for more details on the in-editor fix commands.

  > **#5100**: Use the new "Fix All in Workspace" commands in the "dart fix" prompt `is enhancement` `in editor`
  > When opening a project that has diagnostics that can be fixed with "dart fix" we currently direct you to instructions to run it from the command line:
  > 
  > ![image](https://github.com/Dart-Code/Dart-Code/assets/1078012/cd29d284-c5b7-4ee2-8de5-11531d1d656a)
  > 
  > When using a _pre-release_ SDK that supports the new "Fix All in Workspace" commands, you instead get an option to trigger those commands and see the changes in-editor:
  > 
  > ![image](https://github.com/Dart-Code/Dart-Code/assets/1078012/4ddb9f7f-c700-427a-9760-6a0f291e0d3b)
  > 
  > The reason this is currently only enabled for pre-release SDKs is that the UX for the Preview option isn't great - all of the entries are unticked by default (and it can be tedious to tick them). I have an open PR for VS Code I hope may improve this at https://github.com/microsoft/vscode/pull/210175. If that (or something similar) doesn't land soon, we may wish to consider enabling this functionality anyway (or perhaps hiding the Preview button?).

  * [#5218](https://github.com/Dart-Code/Dart-Code/issues/5218): An issue with the **Move to File** refactoring causing an invalidate state after creating new files has been resolved.

  > **#5218**: Move to file not moving to existing file even after agreeing to replace it `is bug` `in editor`
  > With this code sample:
  > 
  > ```dart
  > import 'package:flutter/material.dart';
  > 
  > void main() => runApp(const MaterialApp(home: Home()));
  > 
  > class Home extends StatefulWidget {
  >   const Home({super.key});
  > 
  >   @override
  >   State createState() => _HomeState();
  > }
  > 
  > class _HomeState extends State {
  >   @override
  >   Widget build(BuildContext context) {
  >     return const Scaffold();
  >   }
  > }
  > ```
  > 
  > Place the cursor under either `Home` or `_HomeState` and with the quick-fix to "Move [it] to file" move it to a new file say `a.dart`.
  > 
  > After that, place the cursor in the second class and do the same (same file). It will (currently) tell you that the file already exists and ask if you want to replace it. After pressing "yes", it does nothing.
  > 
  > [logs.zip](https://github.com/user-attachments/files/16522994/logs.zip)

  * [#5207](https://github.com/Dart-Code/Dart-Code/issues/5207): The TextMate grammar used for initial syntax highlighting has been updated to handle the proposed [digit separators feature](https://github.com/dart-lang/language/issues/2).
  * [#5213](https://github.com/Dart-Code/Dart-Code/issues/5213): A new setting `dart.enablePub` allows disabling Pub functionality including prompts for `pub get`, automatically running `pub get` and visibility of the menu and command entries for running Pub commands.

  > **#5213**: Add a setting to completely disable using `pub` (no prompts, no automatic running, no commands/toolbar buttons) `is enhancement` `in editor` `in commands`
  > **Is your feature request related to a problem? Please describe.**
  > I've started using Melos to manage my monorepos, but realized that running `flutter pub get` in all of the packages works, but doesn't trigger my post-boostrap hooks, nor does it link the packages. This makes the button useless.
  > 
  > **Describe the solution you'd like**
  > If a workspace root contains a `melos.yaml`, offer to run `melos bootstrap` as opposed to `flutter pub get`/`dart pub get`. 
  > 
  > **Describe alternatives you've considered**
  > Allow turning off the button (ideally automatically, but manually works too)
  > 
  > **Additional context**
  > n/a?




## Flutter

  * [#5231](https://github.com/Dart-Code/Dart-Code/issues/5231)/[#5226](https://github.com/Dart-Code/Dart-Code/issues/5226): The version file from `bin/cache/flutter.version.json` in the Flutter SDK is now used in preference to the legacy `version` file which fixes some issues when using the Flutter `master` branch that could result in failure to detect the version (and therefore disabling all features that require a certain SDK version, or causing some DevTools pages to fail to load).

  > **#5231**: Switch to parsing the new Flutter version file `bin/cache/flutter.version.json` instead of the legacy one `version` and remove workaround `is enhancement`
  > See:
  > 
  > - https://github.com/flutter/flutter/issues/142521#issuecomment-2305916631
  > - https://github.com/Dart-Code/Dart-Code/issues/5226
  > 
  > **We should also remove the workaround in dc897c3cd7e5486b373560a52bc98fd630263f8d once this is done.**




## DevTools

  * [#4558](https://github.com/Dart-Code/Dart-Code/issues/4558): Third party DevTools extensions (such as the one in `package:provider`) can be launched from the Flutter sidebar and work embedded inside VS Code.

  > **#4558**: Provider tab not available in devtools `is enhancement`
  > **Is your feature request related to a problem? Please describe.**
  > Hi, I noticed that in the flutter web devtools there is provider tab which is not accessible with vscode flutter extensions.
  > ![CleanShot 2023-05-20 at 22 47 06](https://github.com/Dart-Code/Dart-Code/assets/360645/3afe7863-980f-4023-a9e7-32ac4fff8b98)
  > 
  > **Describe the solution you'd like**
  > Would be great to be able to access provider view without switching to chrome.
  > 
  > **Describe alternatives you've considered**
  > Continue using chrome 
  > 
  > **Additional context**




## Flutter Sidebar

  * [#5225](https://github.com/Dart-Code/Dart-Code/issues/5225): When using the latest versions of Flutter (currently only `master`), the Flutter sidebar will use DTD for communication with Dart-Code instead of `postMessage`. There are currently no functional differences between the two sidebars, but this is a step towards making [the APIs used by the sidebar](https://github.com/dart-lang/sdk/blob/main/pkg/dtd_impl/dtd_common_services_editor.md) available to other DTD clients, and the sidebar more generic so that it could be used by editors besides VS Code.

  > **#5225**: Switch to the DTD sidebar when using a new enough SDK `is enhancement` `in flutter sidebar`
  > - DevTools work done in https://github.com/flutter/devtools/commit/faeb2a3e0d49a01301ed85dd9bba989a88b4b762
  > - DevTools change tagged as 2.39.0-dev.0 in https://github.com/flutter/devtools/commit/fc9d4d87fac0968af984ae3a80520e7ff6933044
  > - ~~As of today, SDK currently only has 2.38.0 https://github.com/dart-lang/sdk/blame/main/DEPS#L105~~
  > - DevTools was rolled into the SDK in https://github.com/dart-lang/sdk/commit/428e52e00c3d15dbe8096b0c1428d238c46759c3
  > - Dart SDK was sinced tagged as 3.6.0-160.0.dev in https://github.com/dart-lang/sdk/commits/618abb61c237ea197c521809c50ab63b6d3d34bf/




## Debugger

  * [#4734](https://github.com/Dart-Code/Dart-Code/issues/4734): Breakpoints are now eagerly resolved and should turn red (if valid) once the app is running, rather than remaining gray (unverified) until the first time the function is executed.

  > **#4734**: Breakpoints are not resolved (they appear greyed in the editor) until just before they are executed `is bug` `in debugging` `relies on sdk changes`
  > **Describe the bug**
  > I have a Dart API project, and I can't create breakpoints after updating to v3.72.2. There is no issue with v3.70.0.
  > 
  > **Expected behavior**
  > Be able to create breakpoint
  > 
  > **Screenshots**
  > 
  > 
  >  - Operating System and version: macOS Ventura Version 13.5.2 (22G91)
  >  - VS Code version: 1.82.0
  >  - Dart extension version: v3.72.2
  >  - Dart/Flutter SDK version:  Dart 3.1.1 / Flutter 3.13.3
  >  
  >  
  > ```
  > !! PLEASE REVIEW THIS LOG FOR SENSITIVE INFORMATION BEFORE SHARING !!
  > 
  > Dart Code extension: 3.72.2
  > Flutter extension: 3.72.0 (activated)
  > 
  > App: Visual Studio Code
  > App Host: desktop
  > Version: 1.82.0
  > Platform: mac
  > 
  > Workspace type: Dart
  > Analyzer type: LSP
  > Multi-root?: true
  > 
  > Dart SDK:
  >     Loc: /Users/hasimyerlikaya/flutter/bin/cache/dart-sdk
  >     Ver: 3.1.1
  > Flutter SDK:
  >     Loc: /Users/hasimyerlikaya/flutter
  >     Ver: 3.13.3
  > 
  > HTTP_PROXY: undefined
  > NO_PROXY: undefined
  > 
  > Logging Categories:
  >     General, AnalyzerTiming, CommandProcesses, DartTest, DAP, VmSer
  > 
  > _(truncated)_

  * [#5237](https://github.com/Dart-Code/Dart-Code/issues/5237): Global Evaluation no longer sometimes fails with “Unable to find the library” when using Windows but running your app on another platform device such as Android.

  > **#5237**: Evaluation not working `is bug` `in debugging`
  > **Describe the bug**
  > Whenever I try to use the evaluation feature is displays the error message `Unable to find the library for` similarly as in #5079
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > 1. Start a debugging session
  > 2. Try evaluating something in the console (e.g. '1 + 1')
  > 
  > **Expected behavior**
  > The evaluation result is returned
  > 
  > **Screenshots**
  > ![image](https://github.com/user-attachments/assets/560a57c9-ba36-4fd9-bde7-cc2c62006266)
  > 
  > 
  >  - Operating System and version: Windows 11 22635.4076
  >  - VS Code version: 1.92.2
  >  - Dart extension version: 3.94.0
  >  - Dart/Flutter SDK version: 3.5.1/3.24.1
  >  - Target device (if the issue relates to Flutter debugging): web

  * [#5232](https://github.com/Dart-Code/Dart-Code/issues/5232): Automatic debug configurations that show up in the **Debug: Select and Start Debugging** list now include the project name as well as the workspace folder name.

  > **#5232**: In a monorepo, when you select the debug session and select "Dart & Flutter...", all projects are shown, but all with the root folder name instead of the project name. `is bug` `in debugging`
  > In a monorepo, when you select the debug session and select "Dart & Flutter...", all projects are shown, but all with the root folder name instead of the project name.
  > 
  > It should show the project name (name in pubspec.yaml)
  > 
  > 
  > ![image](https://github.com/user-attachments/assets/320f18ff-a67e-4dc6-870e-96d6d98b4e4f)
  > 
  > Thanks

  * [#4481](https://github.com/Dart-Code/Dart-Code/issues/4481): The debug adapter now uses new `readyToResume` APIs to work better when there are other debuggers also connected. As long as the other debuggers also use these APIs, race conditions that could result in breakpoints being missed during Hot Reload / Hot Restart should be prevented.

  > **#4481**: Adopt new VM Service APIs to allow multiple clients to work with the debugger `is enhancement` `in debugging`
  > See https://github.com/flutter/devtools/issues/1792
  > https://github.com/dart-lang/sdk/blob/master/pkg/dds/dds_protocol.md#requirepermissiontoresume
  > 
  > This will also require that we don't mess with another clients breakpoints:
  > 
  > https://github.com/flutter/devtools/issues/1792#issuecomment-1040609522




## Testing

  * [#5224](https://github.com/Dart-Code/Dart-Code/issues/5224): The overflow menu on the Test sidebar now has an option to jump to the settings for adding additional test arguments.

  > **#5224**: Improve discoverability of additional args for testing `is enhancement` `in testing`
  > ## Is your feature request related to a problem? Please describe.
  > 
  > Yes, I'd like to execute the dart framework tests with a locally built engine.
  > 
  > ## Describe the solution you'd like
  > 
  > I'd like an entry in the `Testing` settings for DartCode that allows me to specify the arguments to make flutter use a local engine.
  > 
  > ## Describe alternatives you've considered
  > 
  > This would be the easiest solution.
  > 
  > ## Additional context
  > 
  > Here is how I invoke the test the way I want from the command line:
  > ```
  > flutter --local-engine=host_debug_unopt_arm64 \
  >   --local-engine-host=host_debug_unopt_arm64 \
  >   --local-engine-src-path=/Users/aaclarke/dev/engine/src/ test \
  >   --name="Cupertino.*focusable\sand" \
  >   test/material/switch_test.dart 
  > ```

  * [#4198](https://github.com/Dart-Code/Dart-Code/issues/4198): A whole folder of tests can now be run from the context menu in the Explorer sidebar.

  > **#4198**: Add the ability to run tests for a folder to explorer context menu `is enhancement` `in testing`
  > "Run all tests in folder" / "Debug all tests in folder"
  > 
  > To match it, we should probably also rename "Start Debugging"/"Run without debugging" to include "tests" when on a test file.
  > 
  > @connor4312 before I do this, do you think it would make sense to have this in VS Code directly (that is, an option to "run tests in file" and "run tests in folder" in the explorer context menu, which just does the same as filtering to that file/folder in the Test Runner and running them)? I've had a few users ask how best to run tests from the Explorer (in Android Studio/IntelliJ, they can be run from the explorer tree like that).




## Docs / website

  * [#5243](https://github.com/Dart-Code/Dart-Code/issues/5243): The link to the debug adapter documentation in the [launch configuration docs](https://dartcode.org/docs/launch-configuration/) has been updated and is no longer a 404.

  > **#5243**: Issue on website (Launch Configuration) `in docs / website`
  > I found an issue on http://dartcode.org/docs/launch-configuration/
  > 
  > The link https://github.com/dart-lang/sdk/tree/master/pkg/dds/tool/dap#readme in the code snippet leads to 404.




## Misc

  * [#5210](https://github.com/Dart-Code/Dart-Code/issues/5210): Permissions errors trying to read files through DTD due to differences in URI encoding of workspace roots have been resolved.

  > **#5210**: Failure to read files from workspace roots via DTD on Windows `is bug`
  > Not sure if this is a DTD or Dart-Code issue, but on beta we have test failures because we try to read files with slightly different formats of file URI (for example encoded colon vs not), but get a failure for a not-encoded colon:
  > 
  > ```
  > ==> {"id":"3","jsonrpc":"2.0","method":"FileSystem.readFileAsString","params":{"uri":"file:///c%3A/Dev/Dart-Code/Dart-Code/src/test/test_projects/hello_world/bin/main.dart"}}
  > "},"id":"3"}
  > ==> {"id":"4","jsonrpc":"2.0","method":"FileSystem.readFileAsString","params":{"uri":"file:///C:/Dev/Dart-Code/Dart-Code/src/test/test_projects/hello_world/bin/main.dart"}}
  >  {"id":"2","jsonrpc":"2.0","method":"FileSystem.getIDEWorkspaceRoots","params":{}}
  > <== {"jsonrpc":"2.0","result":{"type":"IDEWorkspaceRoots","ideWorkspaceRoots":["file:///c%3A/Dev/Dart-Code/Dart-Code/src/test/test_projects/hello_world"]},"id":"2"}
  > ```

