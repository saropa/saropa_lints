# Dart-Code v3-108

For instructions on installing the Dart or Flutter extensions, [go here](/#installation).

# v3.108.2 _2025-04-03_

  * [#5472](https://github.com/Dart-Code/Dart-Code/issues/5472): Fixed an issue where hyperlinks in DevTools (such as the Docs and Tutorial links) when embedded in the sidebar (see experiment info below) would not function.

  > **#5472**: Cannot open links in DevTools sidebar panels `is bug` `in devtools`
  > Set the DevTools panels to open in the sidebar:
  > 
  > ```
  >   "dart.devToolsLocation": {
  >     "default": "sidebar", 
  > },
  > ```
  > 
  > In one of the panels in the sidebar, click on one of the links in the footer (e.g. "Read docs")
  > 
  > ### Expected behavior:
  > 
  > VS Code asks if you want to open the external website, like it does when you click on a link from a DevTools panel when it is not embedded in the sidebar (see screenshot)
  > 
  > ### Actual behavior:
  > 
  > Nothing happens, can't open the link
  > 
  > *Note: I initially discovered this because I was trying to add a footer to the Property Editor that would let users file a bug / open the documentation.*
  > 
  > ![Image](https://github.com/user-attachments/assets/863ece6d-7b67-45e9-bbae-9135ca48e8dc)




# v3.108.0 _2025-04-01_

## Experimental: DevTools Embedded in Sidebar

[#5396](https://github.com/Dart-Code/Dart-Code/issues/5396)/[#5367](https://github.com/Dart-Code/Dart-Code/issues/5367)/[#5466](https://github.com/Dart-Code/Dart-Code/issues/5466): A new experiment allows embedding DevTools pages inside the sidebar instead of as editor tabs. Trying this out requires enabling an experiment flag and then using the hidden value `"sidebar"` in the `dart.devToolsLocation` setting:

  > **#5396**: [Experiment] Support embedding DevTools in the sidebar `is enhancement` `in devtools`
  > I thought there was an open issue for this but I can't find it, so opening this one.
  > 
  > ~~There is work in-progress to test out embedding DevTools in sidebar panels instead of editors. It's currently blocked on https://github.com/microsoft/vscode/issues/236494 because that causes us to "restore" bad URLs into the iframes when they load.~~
  > 
  > TODO:
  > 
  > - [x] Opening the sidebar before starting a debug session causes it to try to connect to the last session (because of restoring context... we want this to support "Reload WebViews" but probably don't want it to persist over sessions)
  >   This may be a VS Code issue -> https://github.com/microsoft/vscode/issues/236494
  > - [x] ~~Performance feels much worse when resizing the sidebar compared to an editor view~~ doesn't repro now
  > - [x] ~~Sometimes Flutter throws an error and stops rendering~~ wasm issue, not related to this
  > - [x] Decide what should show in the sidebar panels when there's no debug session (or after ending a debug session)
  > - [ ] How to h
  > 
  > _(truncated)_

    
    
    // Enable the experiment
    "dart.experimentalSidebarDevTools": true,
    // Customise which sections are shown in the sidebar, in an editor tab, or external browser.
    "dart.devToolsLocation": {
    	"inspector": "sidebar",     // Embed the inspector in sidebar
    	"cpu-profiler": "external", // Open the CPU profiler in external browser
    	"default": "beside",        // Default other tabs to an editor tab beside the current code editor
    },
    

![](/images/release_notes/v3.108/devtools_sidebar.png)

Please provide feedback on this feature in the [Dart-Code repository on GitHub](https://github.com/Dart-Code/Dart-Code/issues). [Existing known issues can be found here](https://github.com/Dart-Code/Dart-Code/issues?q=is%3Aissue%20state%3Aopen%20label%3A%22in%20devtools%22).

## Testing

  * [#5456](https://github.com/Dart-Code/Dart-Code/issues/5456): Because the Dart SDK repository now uses Pub Workspaces, the `dart.experimentalTestRunnerInSdk` setting has been removed and the test runner functionality is available when working in the Dart SDK repository automatically.

  > **#5456**: Remove the dart.experimentalTestRunnerInSdk setting `is enhancement` `in testing`
  > See https://github.com/Dart-Code/Dart-Code/issues/5455 - the SDK is now using pub workspaces so we should be able to remove this setting ðŸ¥³




## Terminal

  * [#5442](https://github.com/Dart-Code/Dart-Code/issues/5442): Invalid `.dart_tool/package_config.json` files no longer cause unhandled exceptions that could prevent other packages from being detected correctly for creating clickable links in the terminal.

  > **#5442**: Invalid package_config files cause unhandled exceptions and can prevent other packages from being loaded correctly for terminal link provider `is bug`
  > From https://github.com/dart-lang/sdk/issues/48746:
  > 
  > > [H]ere are the analyzer, extension and instrumentation logs:
  > > 
  > > [analyzer.txt](https://github.com/user-attachments/files/19216472/analyzer.txt)
  > > [extension.txt](https://github.com/user-attachments/files/19216470/extension.txt)(maybe helpful with the error below? Not sure)
  > > [InstrumentationLog.txt](https://github.com/user-attachments/files/19216471/InstrumentationLog.txt)
  > > 
  > > From the analyzer log, it seems there was an error.  
  > > 
  > > ```
  > > [16:39:23] [Analyzer] [Info] ==> {"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///D%3A/dev/clones/dart-sdk/sdk/pkg/analysis_server/test/src/services/correction/fix/merge_combinators_test.dart"}},"clientRequestTime":1741808363525}
  > > [16:39:24] [Analyzer] [Info]  Content-Type: application/vscode-jsonrpc; charset=utf-8
  > > [16:39:24] [Analyzer] [Info]  [16:39:24] [Analyzer] [Info]  Content-Type: application/vscode-jsonrpc; charset=utf-8
  > > 
  > > {"jsonrpc":"2.
  > 
  > _(truncated)_




## Misc

  * [#5447](https://github.com/Dart-Code/Dart-Code/issues/5447)/[#5448](https://github.com/Dart-Code/Dart-Code/issues/5448): [@davidmartos96](https://github.com/davidmartos96) contributed a fix to prefer launching `studio` over `stduio.sh` when started Android Studio to avoid a warning when Android Studio opens.

  > **#5447**: Android Studio displays warning when opened from VSCode `is enhancement`
  > **Describe the bug**
  > Android Studio displays warning when opened from VSCode because VSCode seems to launch with the shell script `studio.sh` instead of `studio` binary. 
  > The line https://github.com/Dart-Code/Dart-Code/blob/master/src/shared/constants.ts#L23 let me think `studio.sh` has greater priority than `studio`. Maybe just swap ?
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > 1. Open flutter project with VSCode
  > 2. Right click on `android` folder > `Open in Android Studio`
  > 3. Android Studio will displays the warning
  > 
  > **Expected behavior**
  > No warning
  > 
  > **Screenshots**
  > 
  > ![Image](https://github.com/user-attachments/assets/8cc5c2c5-a09a-4153-85e3-5704f9413240)
  > 
  > **Please complete the following information:**
  > 
  >  - Operating System and version: Fedora 41 Silverblue
  >  - VS Code version: 1.98.2
  >  - Dart extension version: 3.106.0
  >  - Dart/Flutter SDK version: 
  >  - Target device (if the issue relates to Flutter debugging):

  * [#5458](https://github.com/Dart-Code/Dart-Code/issues/5458): The analysis server diagnostic pages and exportable report now include some useful values from the VS Code settings (such as whether formatting or other code actions are enabled on-save).

  > **#5458**: Provide server with useful diagnostic values to include in exportable reports `is enhancement`
  > These are sent once the server has started, and also if any config change affects any of the interesting sections (which are currently "dart" and "editor"). The reported config is scoped to Dart config (falling back to defaults if no Dart-specific config is set),  which means we can't tell if someone has `formatOnSave` set to something different for YAML files (for example), but if becomes useful, we could split this out to record multiple languages values.
  > 
  > This info is visible in the analyzer diagnostics pages as well as the exported report. For a sample workspace it looks like this:
  > 
  > ![image](https://github.com/user-attachments/assets/3f48b17b-1319-486f-94c1-42a68b175d70)
  > 
  > For a single-root workspace, only the `global` section would be present. For a multi-root workspace, we'll add `folder_x` sections for any workspace folder that has settings that differ from the global one.
  > 
  > 
  > @bwilkerson @pq the settings included for now are below - let me know if you think there's anythi
  > 
  > _(truncated)_

  * [#5433](https://github.com/Dart-Code/Dart-Code/issues/5433): The extension no longer tries to inject settings into all configuration provided to the server, regardless of whether itâ€™s the Dart configuration or not.

  > **#5433**: Update configuration middleware to not inject values into non-objects (or non-Dart configuration) `is enhancement`
  > For https://github.com/dart-lang/sdk/issues/60259, we have two options:
  > 
  > 1. Request the whole `editor` configuration and just read the values we care about
  > 2. Request only the values we care about individually (`editor.formatOnSave`, `editor.codeActionsOnSave` etc.)
  > 
  > The first one results in all of the editor settings be included in the payload (once for global, once for each workspace folder) which isn't terrible, but also means this shows up in instrumentation logs (where it didn't before).
  > 
  > The second seems better, however it currently fails because we have middleware to set `enableSnippets` that assumes that the only configuration we ever provide is an `object` (eg. the `dart` section). When requesting `editor.formatOnSave`, we'll try to set a field named `enableSnippets` on a boolean and fail.
  > 
  > We should fix the middleware to be more tolerant of other settings being added in future.

  * [#5090](https://github.com/Dart-Code/Dart-Code/issues/5090): The `dart.previewDtdLspIntegration` setting has been removed and the analysis server will now always connect to DTD when using a supported SDK version. If you are interested in integrating with the analysis server over DTD please [see this issue](https://github.com/dart-lang/sdk/issues/60377) about capabilities.

  > **#5090**: Provide DTD address to analysis server `is enhancement`
  > Depends on an API being established and implemented on the analysis server side for setting the DTD address.
  > https://github.com/dart-lang/sdk/issues/55629
  > 
  > Mirrored tracking issue for IntelliJ: https://github.com/flutter/flutter-intellij/issues/7399




## Documentation

  * [#5453](https://github.com/Dart-Code/Dart-Code/issues/5453): The description of the `toolArgs` launch configuration field has been updated to not use `dart run` as an example, as Dart scripts are currently launched by the debug adapter without `run`.

  > **#5453**: The description of `toolArgs` is misleading `is bug` `in docs / website`
  > **Describe the bug**
  > The current description of the `toolArgs` is misleading,
  > Currently, it states:
  > > Arguments to be passed to the Dart or Flutter tool.
  > These arguments appear after "dart run" or "flutter run":
  > `dart (vmAdditionalArgs) run (toolArgs) bin/main.dart (args)`
  > 
  > However, this is untrue, when setting the `toolArgs` with the resident compiler (`-r`), you get an error from dart stating `Could not find an option or flag "-r".`
  > Because it internally runs `dart [program]` instead of `dart run [program]`
  > 
  > The current workaround is to add `run` beforehand to fix this.
  > 
  > **To Reproduce**
  > Set `toolArgs` to` ["-r"]`.
  > 
  > **Expected behavior**
  > It should work
  > 
  > **Screenshots**
  > 
  > **Please complete the following information:**
  > 
  > You can run the **Dart: Collect Diagnostic Information** command from the VS Code command palette (`F1`) to easily capture this information or provide it manually.
  > 
  > _(truncated)_

  * [#5431](https://github.com/Dart-Code/Dart-Code/issues/5431): The **Dart: DevTools Browser** setting is now documented as only working for local workspaces. Remote workspaces always use the default browser.

  > **#5431**: "Dart: Dev Tools Browser" should be clearly documented as only working for local workspaces `is enhancement` `in docs / website`
  > **Describe the bug**
  > Split off from https://github.com/flutter/devtools/issues/8912 (see https://github.com/flutter/devtools/issues/8912#issuecomment-2679871965)
  > 
  > If you open devtools in the browser while debugging in Dart in VS Code in WSL, the "Dart: Dev Tools Browser" setting does not seem to take effect.  Whether it is set to "chrome" or "default", it always opens in "default", which is Edge on my system.  Note that this *only* is an issue for me in WSL, and the setting works appropriately in Windows natively.
  > 
  > **To Reproduce**
  > 1. Set default browser on your system to Edge (or something else non-Chrome)
  > 2. Open VS Code in WSL2 Ubuntu
  > 3. Set the "Dart: Dev Tools Browser" setting to "chrome"
  > 4. debug a Dart program
  > 5. At a breakpoint, open devtools in browser
  > 6. Observe that it opens in non-Chrome instead of Chrome
  > 
  > **Expected behavior**
  > Setting works, opens in chrome if specified as such.
  > 
  > **Screenshots**
  > 
  > _(truncated)_




## Features/Fixes Enabled with Future SDKs

The following items depend on changes to the Dart/Flutter SDKs that have not yet been released to stable channels. They may be available to test in the current beta/master channels and will show up in future SDK releases.

[#5426](https://github.com/Dart-Code/Dart-Code/issues/5426)/[#5444](https://github.com/Dart-Code/Dart-Code/issues/5444): When debugging on the latest SDKs, â€œinline valuesâ€ will show for local variables and parameters.

  > **#5426**: Support "Inline Values" when debugging `is enhancement` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > There's an issue in the SDK for the server implementation of this, but we should ensure it's called out in release notes here.
  > 
  > https://github.com/dart-lang/sdk/issues/59891
  > 
  > Basic implementation for variables/parameters looks like this:
  > 
  > https://github.com/user-attachments/assets/516cd462-7a4c-4a6d-8273-f4d6e52b2f43
  > 
  > Feedback should be collected in https://github.com/dart-lang/sdk/issues/59891


![](/images/release_notes/v3.108/inline_values.png)

Additionally, enabling the hidden setting `"dart.experimentalInlineValuesProperties": true` will show inline values for getters. If you try out these features, please provide feedback on GitHub (useful feedback includes where values may appear unexpectedly, or expected values not showing up).

  * [#3948](https://github.com/Dart-Code/Dart-Code/issues/3948): Due to changes in Flutter to write localizations into your own app, localizations will no longer sometimes be missing from code completion/quick fixes.

  > **#3948**: AppLocalizations class from flutter_gen does not show in completion/have import fix `is bug` `fixed in dart / flutter` `in flutter` `in lsp/analysis server` `relies on sdk changes`
  > **Describe the bug**
  > When using `flutter_localizations`, the extension doesn't lint/track `AppLocalizations` nor its import `'package:flutter_gen/gen_l10n/app_localizations.dart'` automatically.
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > 1. Install and setup `flutter_localizations`
  > 2. Go in any dart file and try to type `AppLocalizations`: no Quick Fix available, and we have to import the package manually.
  > 
  > **Expected behavior**
  > It should suggest `import 'package:flutter_gen/gen_l10n/app_localizations.dart'` in the Quick Fixes dropdown list.
  > 
  > **Screenshots**
  > ![image](https://user-images.githubusercontent.com/33839996/166436934-85224c0b-def4-428c-857c-37763df5bee7.png)
  > 
  > **Please complete the following information:**
  >  - Operating System and version: Windows 10.0.19044.1645
  >  - VS Code version: 1.66.2
  >  - Dart extension version: 3.40.0
  >  - Dart/Flutter SDK version: Channel stable, 2.10.4
  >  - Target device (if the issue relates to Flutter debugging): None

