# Dart-Code v3-82

For instructions on installing the Dart or Flutter extensions, [go here](/#installation).

# v3.82.0 _2024-02-01_

## Editor

  * [#4552](https://github.com/Dart-Code/Dart-Code/issues/4552): The “Go to Super” command is now available on the editor context menu.

  > **#4552**: Consider adding "Go to Super" to context menu for improved visibility `is enhancement` `in editor`
  > I have a class B and a super class A.
  > 
  > ```
  > class A {
  >  void somemethod();
  > }
  > 
  > class B extends A {
  >  @override
  >   void somemethod() ;
  > }
  > ```
  > 
  > It would be nice to have a method where I could quickly navigate from B:something to A:something.
  > 
  > In eclipse I can click on the method name and be offered a number of navigation options one of which is 'navigate to super class' which switches the editor to the same method in the super class i.e A: something.

  * [#4957](https://github.com/Dart-Code/Dart-Code/issues/4957): Methods named `get`/`set` that have type arguments are no longer coloured like keywords when Semantic Tokens are disabled (or unsupported by the theme).

  > **#4957**: Syntax highlighting for generic get methods inconsistent `is bug` `in editor`
  > **Describe the bug**
  > Highlighting error: Generic get function is treated as keyword when proving the generic type.
  > 
  > **To Reproduce**
  > Take this code snippet:
  > ```dart
  > void main() {
  >   get();
  >   get();
  > }
  > 
  > void get() {}
  > ```
  > 
  > **Expected behavior**
  > Having consistent highlighting that resembles a method instead of a keyword.
  > 
  > **Screenshots**
  > ![image](https://github.com/Dart-Code/Dart-Code/assets/60504285/3c0305f2-1a2a-4531-8d9e-0481c8a1479c)
  > 
  > 
  > **Please complete the following information:**
  > 
  > You can run the **Dart: Collect Diagnostic Information** command from the VS Code command palette (`F1`) to easily capture this information or provide it manually.
  > 
  >  - Operating System and version: "Windows 10 Pro" 10.0 (Build 22635)
  >  - VS Code version: win 1.85.2
  >  - Dart extension version: 3.80.0
  >  - Dart/Flutter SDK version: 3.2.3/3.16.3
  >  - Target device (if the issue relates to Flutter debugging):




## DevTools

[#4387](https://github.com/Dart-Code/Dart-Code/issues/4387): The `dart.devtoolsLocation` setting has been updated to allow specifying different settings for each DevTools page.

  > **#4387**: Allow control of which DevTools pages open embedded vs externally `is enhancement` `in devtools`
  > Some DevTools pages require more screen real estate than an embedded tool window can offer for the ideal user experience (e.g. the performance page). When looking at timeline traces, the more screen real estate the better, and looking at a trace viewer in a small tooling window is not a great UX.
  > 
  > We might want to consider having a set of defaults that can be configurable as a setting, that set the user up for the ideal debugging experience. For example, a user may want to always use the embedded Flutter Inspector but always use the browser version for the Performance and Memory page.
  > 
  > It could also be useful to have a button available in the embedded VS code experience that opens the current tool in the browser. This would conveniently allow the user to open DevTools in the browser if they feel that the embedded experience is not giving them enough space to perform the debugging they need.


### Before:
    
    
    "devToolsLocation": "beside" // "beside" | "external" | "active"
    

### After:
    
    
    "dart.devToolsLocation": {
    	"default": "beside", // A default used for any pages not explicitly configured
    	"cpu-profiler": "external" // Open CPU profiler externally always
    },
    

## Debugger

  * [#4966](https://github.com/Dart-Code/Dart-Code/issues/4966): The `dart.previewSdkDaps` setting has been replaced by a new `dart.useLegacyDebugAdapters`. The new setting has the opposite meaning (`true` means to use the legacy adapters, whereas for the old setting that was `false`).

  > **#4966**: Replace previewSdkDaps with useLegacyDebugAdapters (and invert meaning) `is enhancement` `in debugging`
  > It's a little confusing to opt-out of new DAPs using the old flag, so we should rename/invert it.

  * [#4930](https://github.com/Dart-Code/Dart-Code/issues/4930): Errors that occur when evaluating expressions (such as those triggered by Watch expressions that are no in scope) no longer trigger additional error notifications/toasts.

  > **#4930**: Evaluation errors now show toast notification while debugging `is bug` `in debugging`
  > When an evaluation fails, we now get the VS Code toast in the corner:
  > 
  > ![image](https://github.com/Dart-Code/Dart-Code/assets/1078012/71a8af9f-689a-406f-abc1-697409938749)
  > 
  > This can be quite annoying if you have things in your watch window. I wonder if it's related to https://dart-review.googlesource.com/c/sdk/+/339741 ?

  * [#4926](https://github.com/Dart-Code/Dart-Code/issues/4926): An issue that could cause Flutter apps to freeze when modifying breakpoints was fixed and hot-fixed into Flutter 3.16.9.

  > **#4926**: Flutter app freezes after adding a breakpoint in VS Code `is bug` `fixed in dart / flutter` `in debugging` `relies on sdk changes`
  > **Describe the bug**
  > Running an iOS or MacOS app from VSCode, as soon as I add a breakpoint the app freezes immediately. Not hot reload or hot restart is able to revive the app. Only stopping and starting again works.
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > 1. Start debugging an iOS or MacOS Flutter app
  > 2. On VS Code, add a breakpoint at any line in your code
  > 3. App will freeze
  > 
  > Unfortunately I have noticed some intermittent behavior, but I'd say 90% of the times it freezes.
  > 
  > **Expected behavior**
  > App should not freeze.
  > 
  > **Screenshots**
  > If applicable, add screenshots to help explain your problem.
  > 
  > **Please complete the following information:**
  > 
  > You can run the **Dart: Collect Diagnostic Information** command from the VS Code command palette (`F1`) to easily capture this information or provide it manually.
  > 
  > 
  > 
  > Workspace Environment
  > 
  > ```text
  > Dart Code extension: 3.80.0
  > Flutter extension: 3.80.0 (activated)
  > 
  > App: Visual Studio Code
  > App Host: desktop
  > 
  > _(truncated)_




## Misc

  * [#4705](https://github.com/Dart-Code/Dart-Code/issues/4705)/[#4847](https://github.com/Dart-Code/Dart-Code/issues/4847): Notifications may now be shown suggesting other VS Code extensions appropriate for the project and packages you are using.

  > **#4705**: Add logic for VS code to promote other VS code extensions  `is enhancement`
  > As part of the broader effort to support dart ecosystem extensions, we've designed a mechanism for a pub package to provide extension information as part of its package. For DevTools, this is the precompiled flutter web app that DevTools will embed. For VS Code extensions, the pub package can include a `config.yaml` file that tells the Dart-Code promotion which extension should be promoted:
  > ```
  > my_package/
  >    lib/
  >       ...
  >    extension/
  >       vs_code/
  >           # contains meta data that VS code needs to point to another
  >           # extension on the VS code marketplace
  >          config.yaml
  > ```
  > 
  > [package:extension_discovery](https://pub.dev/packages/extension_discovery) has logic to detect available extensions for a given `.dart_tool/package_config.json` file. Since this package is written in Dart, it cannot be used by the Dart-Code extension directly, so it will need to be called into from the Dart-Code extension by proxy of some other Dart service. Eventually, this would b
  > 
  > _(truncated)_




## Features/Fixes Enabled with Future SDKs

The following items depend on changes to the Dart/Flutter SDKs that have not yet been released to stable channels. They may be available to test in the current beta/master channels and will show up in future SDK releases.

  * [#4953](https://github.com/Dart-Code/Dart-Code/issues/4953): Using `dart.customDevTools` to run DevTools from source should no longer fail if there is no `dart` on `PATH`.

  > **#4953**: Run with custom devtools not working  `is bug` `in devtools`
  > custom devtools settings:
  > ```
  >     "dart.customDevTools": {
  >         "path": "/Users/kenzieschmoll/develop/devtools",
  >         "env": {
  >             "LOCAL_DART_SDK": "/Users/kenzieschmoll/develop/dart-sdk/sdk",
  >             // "FLUTTER_ROOT": "/Users/kenzieschmoll/develop/devtools/tool/flutter-sdk"
  >         }
  >     },
  >     "dart.devToolsLogFile": "logs/devtools.txt",
  > ```
  > 
  > logs (step where it fails):
  > ```
  > [2:46:38 PM] [DevTools] [Info]  /Users/kenzieschmoll/develop/devtools/tool/flutter-sdk/bin/flutter build web --web-renderer canvaskit --pwa-strategy=offline-first --release --no-tree-shake-icons
  > [2:48:14 PM] [DevTools] [Info]  chmod 0755 /Users/kenzieschmoll/develop/devtools/packages/devtools_app/build/web/canvaskit/canvaskit.js.symbols
  > [2:48:14 PM] [DevTools] [Info]  chmod 0755 /Users/kenzieschmoll/develop/devtools/packages/devtools_app/build/web/canvaskit/canvaskit.js
  > [2:48:14 PM] [DevTools] [Info]  chmod 0755 /Users/kenzieschmoll/develop/devtools/packages/devtools_app/build/
  > 
  > _(truncated)_

  * [#4932](https://github.com/Dart-Code/Dart-Code/issues/4932): Global evaluation no longer fails with “Unable to find the library” when the open file is inside the lib folder of a package.

  > **#4932**: "Unable to find the library" for global evaluation when the current file is inside the lib folder `is bug` `in debugging` `relies on sdk changes`
  > **Describe the bug**
  > Any attempt to execute an expression in VS Code's debug console for a Flutter app running in debug mode prints back:
  > 
  > ```
  > 1 + 1
  > Unable to find the library for file:///e%3A/Development/_code/Flutter/app_5/lib/main.dart
  > #0      DartDebugAdapter.evaluateRequest (package:dds/src/dap/adapters/dart.dart:1060:7)
  > 
  > #1      BaseDebugAdapter.handle (package:dds/src/dap/base_debug_adapter.dart:141:7)
  > 
  > ```
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > 1. Create a new app via "Flutter: New Project".
  > 2. Build it for Windows, in my case.
  > 3. Attempt to evaluate any expression in VSC's debug console.
  > 4. Observe the `unable to find the library` aforementioned error from above.
  > 
  > **Expected behavior**
  > Prior to the most recent upgrade to Flutter 3+ and Dart SDK 3.2.3, it was perfectly possible not only to evaluate arbitrary operations in global context, but also to reference the declarations in the `main.dart` directly. This was extremely useful for custom debug
  > 
  > _(truncated)_

  * [#4908](https://github.com/Dart-Code/Dart-Code/issues/4908): Fields on Record types are now colored the same way as fields on classes.

  > **#4908**: Record fields are not syntax highlighted `is bug` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > **Is your feature request related to a problem? Please describe.**
  > Currently, when using records with named fields, the names of the fields are not highlighted like regular field accessors.
  > 
  > Consider the sample: 
  > 
  > ```dart
  > void foo() {
  >   const ({bool someField}) rec = (someField: false);
  > 
  >   final bool myBool = rec.someField;
  > }
  > ```
  > 
  > ![image](https://github.com/Dart-Code/Dart-Code/assets/23480364/63b1126c-5e44-4b8d-b2ca-c2c2dda69dd3)
  > 
  > **Describe the solution you'd like**
  > Have named fields of records highlighted the same way as fields / local variables.
  > Since named fields in methods and constructors get highlighted in blue, I propose we do the following:
  > 
  > 1) Highlight the named fields of records at the declaration site (LHS of the code sample).
  > This brings it in line with named fields for methods/constructors.
  > 
  > 2) Highlight the named field access when using the field.
  > This brings it in line with regular usage of class fields and (local) variables.
  > 
  > **Describe alter
  > 
  > _(truncated)_

  * [#4907](https://github.com/Dart-Code/Dart-Code/issues/4907): A “No thread with threadId x” error that could occur when terminating a debug session has been resolved.

  > **#4907**: StackTrace error running a Dart CLI app `is bug` `in debugging` `relies on sdk changes`
  > When running a CLI app with DDS from source, I sometimes see this.
  > 
  > ![image](https://github.com/Dart-Code/Dart-Code/assets/1078012/2e887afd-8ead-4fca-b79b-1cb2ce0f5626)

  * [#4899](https://github.com/Dart-Code/Dart-Code/issues/4899): The “Global evaluation not currently supported” message has been improved and no longer includes a verbose stack trace.

  > **#4899**: "Global evaluation not currently supported" message is unclear and DAP errors include verbose stack traces `is bug` `in debugging` `relies on sdk changes`
  > **Describe the bug**
  > 
  > If you try to enter a debug expression when the debugger is not running, you get `UnimplementedError`, with a big ugly stacktrace. Probably only the error message itself should be shown.
  > 
  > ```
  > UnimplementedError: Global evaluation not currently supported without a Dart script context
  > #0      DartDebugAdapter.evaluateRequest (package:dds/src/dap/adapters/dart.dart:980:7)
  > #1      BaseDebugAdapter.handle (package:dds/src/dap/base_debug_adapter.dart:141:20)
  > #2      BaseDebugAdapter.handleIncomingRequest (package:dds/src/dap/base_debug_adapter.dart:460:7)
  > #3      BaseDebugAdapter._handleIncomingMessage (package:dds/src/dap/base_debug_adapter.dart:301:7)
  > #4      ByteStreamServerChannel._readMessage (package:dds/src/dap/protocol_stream.dart:82:18)
  > #5      ByteStreamServerChannel.listen. (package:dds/src/dap/protocol_stream.dart:53:24)
  > #6      _rootRunUnary (dart:async/zone.dart:1407:47)
  > #7      _CustomZone.runUnary (dart:async/zone.dart:1308:19)
  > #8      _Cus
  > 
  > _(truncated)_

  * [#4835](https://github.com/Dart-Code/Dart-Code/issues/4835): [DevTools extensions](https://pub.dev/packages/devtools_extensions) can be opened from the sidebar.

  > **#4835**: Support opening DevTools extensions from the sidebar `is enhancement` `in devtools` `relies on sdk changes` `in flutter sidebar`
  > In the past we've had a lot of assumptions about which pages we can open and I'm not sure where they still exist. We need to be able to open extensions in DevTools which will have IDs unknown to us (see https://github.com/flutter/devtools/pull/6709).
  > 
  > There might be nothing to do, but it'll definitely need some testing and reviewing of the code.
  > 
  > - [ ] If changes are required, add a capability so DevTools/sidebar knows it can do this.

  * [#4952](https://github.com/Dart-Code/Dart-Code/issues/4952): [DevTools extensions](https://pub.dev/packages/devtools_extensions) and other DevTools pages that are not specifically known to Dart-Code can now be opened embedded instead of only in an external browser.

  > **#4952**: Support DevTools extensions embedded inside VS Code `is enhancement` `in devtools` `relies on sdk changes` `in flutter sidebar`
  > As of https://github.com/flutter/devtools/commit/0fba4006fe0cf21681b0d6ef810366fe9366cd19, DevTools extensions are now shown in the debug session DevTools menu: 
  > ![Screenshot 2024-01-17 at 2 20 53 PM](https://github.com/Dart-Code/Dart-Code/assets/43759233/75f5b310-4a99-4172-8540-e4e6a532552d)
  > 
  > This extension screens open by default in the browser. What will it take to enable extension screens to be opened inside VS code like other devtools screens are?

  * [#4821](https://github.com/Dart-Code/Dart-Code/issues/4821): DevTools can now be opened in an external browser (regardless of the `dart.devToolsLocation` setting) from the sidebar.

  > **#4821**: Support opening DevTools in external browser via API for sidebar `is enhancement` `in devtools` `relies on sdk changes`
  > Raised at https://github.com/flutter/devtools/issues/6563
  > 
  > When opening DevTools from the command in the palette, you can choose a specific page of to "Open in Browser" (which is always the browser, regardless of embed setting). It should be possible to do the same from the sidebar.
  > 
  > - [x] Requires a capability to be set

  * [#4967](https://github.com/Dart-Code/Dart-Code/issues/4967): The “Deep Links” tool in a future version of DevTools will now be launchable from the command palette.
