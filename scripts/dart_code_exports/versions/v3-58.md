# Dart-Code v3-58

For instructions on installing the Dart or Flutter extensions, [go here](/#installation).

# v3.58.0 _2023-01-25_

## Inlay Hints for Types and Parameter Names

[#4154](https://github.com/Dart-Code/Dart-Code/issues/4154)/[#3609](https://github.com/Dart-Code/Dart-Code/issues/3609)/[#4156](https://github.com/Dart-Code/Dart-Code/issues/4156): Inlay hints are now available for types and parameter names. Hints will be shown while holding down `Ctrl`+`Alt` (or `Ctrl`+`Option` on macOS).

  > **#4154**: Show inferred types as inline code `is enhancement` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > I've been writing some Rust code and I've appreciated the inline declarations of inferred types.  It makes reading and working with code much easier.  This is apropos Dart where some repositories enforce the explicit declaration of types whereas others don't.
  > 
  > Here is an example of the Rust extension showing inferred types (and parameter names but this issue isn't asking for that):
  > 
  > 
  > `: &Option>>` is the inferred type of `result`.  It doesn't exist in the file but it would be valid code had it been written there.  The inline hint is itself valid code, which is important.
  > 
  > So in Dart's case it would look like this:
  > ```dart
  > final x = add(1, 2);
  > ```
  > becomes:
  > ```dart
  > final int x = add(1, 2);
  > ```
  > Where `int` doesn't exist in the code but is displayed as above as if it was.


![](/images/release_notes/v3.58/inlay_hints.gif)

Hovering over an Inlay Hint will show the same hover information as if the hint had been written in the document.

![](/images/release_notes/v3.58/inlay_hints_hover.png)

You can change the behaviour with the `editor.inlayHints.enabled` setting for Dart:
    
    
    "[dart]": {
    	// 'off' - never show
    	// 'on' - always show
    	// 'offUnlessPressed' - show only while shortcut keys are held down (default)
    	// 'onUnlessPressed' - show, but hide while shortcut keys are held down
    	"editor.inlayHints.enabled": "offUnlessPressed"
    },
    

Note: This feature requires Dart 2.19 / Flutter 3.7 or later.

## Type Hierarchy

  * [#2527](https://github.com/Dart-Code/Dart-Code/issues/2527)/[#4217](https://github.com/Dart-Code/Dart-Code/issues/4217)/[#3313](https://github.com/Dart-Code/Dart-Code/issues/3313): An improved Type Hierarchy is now available. It can be accessed from the editor context menu or using the **Types: Show Type Hierarchy** command in the command palette (`F1`).

  > **#2527**: Implement Type Hierarchy for LSP `is enhancement` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > How can I revover this function? Thanks! 
  > My IDE:
  > Name: Visual Studio Code
  > Version: 1.45.1
  > Commit: 5763d909d5f12fe19f215cbfdd29a91c0fa9208a
  > Date: 2020-05-14T08:33:47.663Z
  > Electron: 7.2.4
  > Chrome: 78.0.3904.130
  > Node.js: 12.8.1
  > V8: 7.8.279.23-electron.0
  > OS: Darwin x64 18.7.0
  > 
  > My Flutter and Dart SDK :3.11.0
  > 
  > ![image](https://user-images.githubusercontent.com/2143234/83995129-2389c080-a98b-11ea-8e8f-c4dbb56bab30.png)
  > 
  > ![image](https://user-images.githubusercontent.com/2143234/83995086-f806d600-a98a-11ea-9df5-1213a886042d.png)




![](/images/release_notes/v3.58/type_hierarchy.gif)

You can change the direction of the type hierarchy using the “Show Subtypes” / “Show Supertypes” button on the hierarchy menu bar.

![](/images/release_notes/v3.58/type_hierarchy_direction.gif)

Note: This feature requires Dart 2.19 / Flutter 3.7 or later.

## Call Hierarchy

[#612](https://github.com/Dart-Code/Dart-Code/issues/612): A Call Hierarchy is now available. It can be accessed from the editor context menu, or using the **Calls: Show Call Hierarchy** command in the command palette (`F1`).

  > **#612**: Add call hierarchy feature `is enhancement` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > Don't know if it's possible. It's possible to check a function's call hierarchy in IntelliJ. Is it possible to bring it to VSCode?


You can change the direction of the call hierarchy using the “Show Incoming Calls” / “Show Outgoing Calls” button on the hierarchy menu bar.

![](/images/release_notes/v3.58/call_hierarchy.gif)

Note: This feature requires Dart 2.19 / Flutter 3.7 or later.

## Flutter

  * [#4332](https://github.com/Dart-Code/Dart-Code/issues/4332): Explicitly selecting a device in the device selector will now save that device as the preferred device for that project. The preferred device will be automatically selected (if available) each time you open that project. This overrides the previous behaviour of always selected the last connected mobile device. You can switch back to the previous behaviour using the `dart.flutterRememberSelectedDevice` setting.

  > **#4332**: Remember last selected debug device. `is enhancement` `in flutter`
  > It would be great if the last selected device is remembered. Currently, you have to select the device every time after launching VS Code. It's annoying when you don't think about it after pressing F5 (run debug). In my case it always switches back to Windows desktop. But I want Chrome web.
  > 
  > ![screenshot](https://user-images.githubusercontent.com/53160891/210932663-9b95a395-6f9b-43b1-b9b3-8f9fedcef039.png)

  * [#4268](https://github.com/Dart-Code/Dart-Code/issues/4268): The **Flutter: New Project** command now has an additional template type “Application (empty)” which creates a basic Hello World app instead of the counter app.

  > **#4268**: Add support for creating an "empty" project `is enhancement` `in flutter` `in commands`
  > Flutter recently added an option to `flutter create` to create an empty project that doesn't have any comments, the code is just a hello world instead of the counter app, and there's no test directory.  The flag is `--empty`.
  > 
  > It would be nice to add the option to the VSCode extension to allow people to create an empty project instead of one that has the counter app in it.  I'm not sure how that should manifest, it could either be an option setting that modifies the "Flutter: New Project" command, or an additional "Flutter: New Empty Project" command, I'm not sure which is more appropriate (maybe the latter?).
  > 
  > For context, see [this comment](https://github.com/flutter/flutter/issues/111118#issuecomment-1315816702), the PR that added the flag: https://github.com/flutter/flutter/pull/113873, and the [related IntelliJ feature request](https://github.com/flutter/flutter-intellij/issues/6402).

  * [#4335](https://github.com/Dart-Code/Dart-Code/issues/4335): Icon previews are now available for recently-added icons.

  > **#4335**: Some Flutter icon previews are missing from code completion/hover details `is bug` `in flutter` `in editor`
  > From https://github.com/flutter/flutter/issues/117384:
  > 
  > ---
  > 
  > Some links to icons from the `Icons` class are broken in the IDE tooltips.
  > 
  > I found that the following icons have broken links:
  > - `Icons.arrow_outward` (all variants)
  > - `Icons.assignment_add`
  > - `Icons.assist_walker` (all variants)
  > - `Icons.barcode_reader`
  > - `Icons.battery_1` through `Icons.battery_6` (all variants)
  > - `Icons.blind` (all variants)
  > - `Icons.brightness_1` through `Icons.brightness_7` (all variants) 
  > - `Icons_diversity` (all variants)

  * [#4349](https://github.com/Dart-Code/Dart-Code/issues/4349): Icon previews no longer fail to load for icons that contain (but do not start with) numbers.

  > **#4349**: Icon previews do not work for icons that contain (but don't start with) numbers `is bug` `in flutter` `in editor`
  > Icons like `diversity_1` are being changed to `one_iversity_1`.




## Editor

  * [#4143](https://github.com/Dart-Code/Dart-Code/issues/4143): Code completion auto-importing now works for extension members.

  > **#4143**: Auto-imports not working for extension members `is bug` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > Using a recent nightly (which uses `NotImportedContributor`), completing on `firstOrNull` from `package:collection` does not add the `import` statement:
  > 
  > 
  > 
  > Importing on something else (like `calculate()` from the default command line project) does insert the import statement.

  * [#4119](https://github.com/Dart-Code/Dart-Code/issues/4119): A new setting `dart.documentation` controls how much dartdoc documentation is shown in hovers/code completions. Options are `"full"` (the default), `"summary"` (showing just the first paragraph) or `"none"` (no dartdocs are shown).

  > **#4119**: Need an option to disable the documentation section on hover `is enhancement` `in editor` `in lsp/analysis server`
  > **Is your feature request related to a problem? Please describe.**
  > When I hover some symbol on Dart, I get a documentation section on hover:
  > 
  > ![image](https://user-images.githubusercontent.com/1370530/186607482-33fdde48-e173-4008-bd23-9a356239c0be.png)
  > 
  > I couldn't find a way to disable that section. Note that I don't want to disable the whole popup (which can be done at vscode level), I still need the build errors, the debugger inspections, and even the function prototype. I just want to remove the documentation.
  > 
  > **Describe the solution you'd like**
  > A lot of other plugins have an option for that, like:
  > 
  > ```
  >   "rust-analyzer.hover.documentation.enable": false,
  >   "html.hover.documentation": false,
  >   "csharp.referencesCodeLens.enabled": false,
  > ```
  > 
  > As an example, here's what my config looks like in C#, there's only the full type and a short description appearing:
  > 
  > ![image](https://user-images.githubusercontent.com/1370530/186609674-c2a3ef4b-fde5-46cf-b52f-b12a4eae92de.p
  > 
  > _(truncated)_

  * [#4279](https://github.com/Dart-Code/Dart-Code/issues/4279): Quick-fixes generated by the analysis server (including plugins) for `pubspec.yaml` and `analysis_options.yaml` will now show up as expected.

  > **#4279**: Quick-fixes don't appear in Pubspec / analysis options `is enhancement` `in editor` `in lsp/analysis server` `relies on sdk changes`
  > (release notes placeholder for issue raised at https://github.com/dart-lang/sdk/issues/50306)




## Testing

  * [#4325](https://github.com/Dart-Code/Dart-Code/issues/4325)/[#4328](https://github.com/Dart-Code/Dart-Code/issues/4328): Running a test suite with a large number of tests should no longer take several times longer than running the tests from the command line.

  > **#4325**: very slow test execution when there are many (~thousands) of tests defined in a file `in dart` `in testing` `is performance`
  > I'm working on a project where most of the tests are generated from a specification. There are tens of thousands of tests, and depending on the granularity of the source spec (the WASM specification) there can be several thousands tests in a single dart source file.
  > 
  > I see very slow test execution (from VS Code) when there are thousands of tests in a single dart source file. This is in comparison to running `dart test` for the same project from the command line - test execution there is on the order of a few seconds (`6.90s` for 7,590 tests). From VS code, just the tests in one file may take a few minutes to run.
  > 
  > I assume there's a quadratic / polynomial algorithm in there somewhere. I'm not sure if its in `dart test` (finding the locations for tess in the files?), in VS Code (displaying the locations?) or in the communication between the two (discovering tests and communicating it back to VS Code?). Or perhaps in the xml reporter for dart test - generally only used by IDEs?
  > 
  > In
  > 
  > _(truncated)_

  * [#4326](https://github.com/Dart-Code/Dart-Code/issues/4326): Opening a project with a large number of tests no longer triggers an “Unresponsive extension host” warning.

  > **#4326**: "Unresponsive extension host" opening large project `is performance`
  > While looking into #4325, with `f32_test.dart` open and running "Reload Window" to restart, I see this in the console:
  > 
  > 
  > 
  > Several profiles here:
  > 
  > [cpu profiles.zip](https://github.com/Dart-Code/Dart-Code/files/10313974/cpu.profiles.zip)

  * [#4341](https://github.com/Dart-Code/Dart-Code/issues/4341): The test explorer no longer sometimes shows old test names that have been removed/renamed but were never run.

  > **#4341**: Test explorer shows old test names that not longer exist `is bug` `in testing`
  > **Describe the bug**
  > 
  > The test explorer of VSCode shows old test names that not longer exist. For example, in Dart, a test is created with the name Test 1. When this is renamed to Test 2, Test 1 and Test 2 appear in the Explorer text. Test 1 can of course no longer be executed correctly.
  > 
  > In the example, we filtered for tests in the active file.
  > 
  > In the repository of VSCode it was said that the problem is with the extension: https://github.com/microsoft/vscode/issues/171257
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > 1. Create a with the name Test 1.
  > 2. Rename to Test 2
  > 3. Test 1 and Test 2 appear in the Explorer text.
  > 
  > **Expected behavior**
  >  Only the new test name should appear.
  > 
  > **Screenshots**
  > 
  > ![CleanShot 2023-01-13 at 14 39 36](https://user-images.githubusercontent.com/1169185/212334094-5dfac0fd-f2b0-47a3-9936-9f23ebbb1e3f.png)
  > 
  > ![CleanShot 2023-01-13 at 14 39 48](https://user-images.githubusercontent.com/1169185/212334081-bb5dc248-83a8-47ab-94a7-416d69
  > 
  > _(truncated)_




## Debugger

  * [#4353](https://github.com/Dart-Code/Dart-Code/issues/4353): Fields of record types (experimental) are now displayed in debugger views such as hovers, watch window, etc.

  > **#4353**: Show records fields in debugger views when using experiment `is enhancement` `in debugging`
  > Equiv of https://dart-review.googlesource.com/c/sdk/+/279353. Although I'm not generally adding new features to the legacy DA, this is a trivial change and would help if people want to try out records prior to everyone being switched to the new DAs.

  * [#4213](https://github.com/Dart-Code/Dart-Code/issues/4213): List types from `dart:typed_data` such as `Uint8List` are now displayed the same way as standard `List`s in debugger views if using the new preview SDK DAPs.

  > **#4213**: Improve rendering of Uint8List (and friends) in the debugger `is enhancement` `in debugging` `relies on sdk changes`
  > ```dart
  > final a = [1, 2, 3, 4, 5, 6];
  > final b = Uint8List.fromList(a);
  > final c = Uint16List.fromList(a)
  > ```
  > 
  > List `a` looks like a list, but the others do not:
  > 
  > 
  > 
  > In the VM Service traffic, we can see the item has a `length: 6` so we might be able to present it the same as a standard `List`:

  * [#3551](https://github.com/Dart-Code/Dart-Code/issues/3551)/[#4128](https://github.com/Dart-Code/Dart-Code/issues/4128): Dart SDK libraries are now correctly mapped to local sources when stepping if using the new preview SDK DAPs. This means breakpoints set in SDK libraries via the editors Go-to-Definition functionality when not debugging will work as expected.

  > **#3551**: Breakpoints in Dart SDK code are not hit `is bug` `in debugging`
  > I tried to put breakpoints in Dart SDK code but those breakpoints are ignored.
  > 
  > To reproduce this I setup an environment with :
  > - A fresh SDK installation : ```Dart SDK version: 2.15.0-68.0.dev (dev) (Wed Sep 1 05:51:32 2021 -0700) on "linux_x64"```
  > - A fresh Dart project created from DartCode command ```Dart: New Project``` and selecting ```simple-console``` template
  > - Try to put a breakpoint in ```print``` source code
  > 
  > I used two ways to put this breakpoint :
  > 1 - Using 'Go to definition' and add the breakpoint
  > 2 - Launching a debug session and 'Step into' to reach Dart SDK source code and add the breakpoint
  > 
  > Two breakpoints were created with different paths, neither works :
  > ![BreakpointsList](https://user-images.githubusercontent.com/840911/132001598-faf53d9c-7e28-404d-a79e-38e97d822ec5.png)
  > 
  > DartCode debugging logs :
  > [Dart-Code-Log-2021-08-05 13-41-24.txt](https://github.com/Dart-Code/Dart-Code/files/7105732/Dart-Code-Log-2021-08-05.13-41-24.txt)
  > 
  > Corresponding sess
  > 
  > _(truncated)_




## Other

  * [#4350](https://github.com/Dart-Code/Dart-Code/issues/4350): It’s no longer possible to create new projects with invalid names using the **Dart: New Project** /**Flutter: New Project** by pressing `<enter>` when a validation error is displayed.

  > **#4350**: New Project name validation does not prevent proceeding `is bug` `in commands`
  > Pressing `` here still attempts to create the project and then gives an error.

  * [#4307](https://github.com/Dart-Code/Dart-Code/issues/4307): Automatic fetching of packages when `pubspec.yaml` is modified no longer silently fails if the initial prompt to fetch packages at project load was ignored (and left in the VS Code notification area).

  > **#4307**: Automatic Packages Get on Pubspec change not working if prompt to run "pub get" at startup is ignored
  > **Describe the bug**
  > Hello, I've recently encountered with this odd behavior in my project. I'm aware of the `dart.runPubGetOnPubspecChanges` setting, which is set to `always`. 
  > Trying it with a simpler project, it seems to work correctly.
  > I would like to know what could be causing it to fail in the other project. Is there any way to show the logger messages with the Extension installed from the store? I can see in the implementation that there are several messages when an early return occurs.
  > The automatic packages get behavior has been working fine for a long time in this project, so something must have changed recently on my end or on vscode. 
  > 
  > 
  > **To Reproduce**
  > Steps to reproduce the behavior:
  > 1. Edit pubspec.yaml
  > 2. Packages get is not run.
  > 
  > **Expected behavior**
  > Packages get should run
  > 
  > **Please complete the following information:**
  >  - Operating System and version: Fedora 37
  >  - VS Code version: 1.74.1
  >  - Dart extension version: 3.55.20221130
  >  - Dart/Flutter SDK
  > 
  > _(truncated)_

